(()=>{"use strict";const e=Symbol.for("yaml.alias"),t=Symbol.for("yaml.document"),n=Symbol.for("yaml.map"),r=Symbol.for("yaml.pair"),i=Symbol.for("yaml.scalar"),o=Symbol.for("yaml.seq"),s=Symbol.for("yaml.node.type"),a=t=>!!t&&"object"==typeof t&&t[s]===e,c=e=>!!e&&"object"==typeof e&&e[s]===t,l=e=>!!e&&"object"==typeof e&&e[s]===n,u=e=>!!e&&"object"==typeof e&&e[s]===r,f=e=>!!e&&"object"==typeof e&&e[s]===i,p=e=>!!e&&"object"==typeof e&&e[s]===o;function h(e){if(e&&"object"==typeof e)switch(e[s]){case n:case o:return!0}return!1}function m(t){if(t&&"object"==typeof t)switch(t[s]){case e:case n:case i:case o:return!0}return!1}class y{constructor(e){Object.defineProperty(this,s,{value:e})}}const d=Symbol("break visit"),g=Symbol("skip children"),_=Symbol("remove node");function b(e,t){"object"==typeof t&&(t.Collection||t.Node||t.Value)&&(t=Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t)),c(e)?v(null,e.contents,t,Object.freeze([e]))===_&&(e.contents=null):v(null,e,t,Object.freeze([]))}function v(e,t,n,r){let i;if("function"==typeof n?i=n(e,t,r):l(t)?n.Map&&(i=n.Map(e,t,r)):p(t)?n.Seq&&(i=n.Seq(e,t,r)):u(t)?n.Pair&&(i=n.Pair(e,t,r)):f(t)?n.Scalar&&(i=n.Scalar(e,t,r)):a(t)&&n.Alias&&(i=n.Alias(e,t,r)),m(i)||u(i)){const t=r[r.length-1];if(h(t))t.items[e]=i;else if(u(t))"key"===e?t.key=i:t.value=i;else{if(!c(t)){const e=a(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}t.contents=i}return v(e,i,n,r)}if("symbol"!=typeof i)if(h(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const i=v(e,t.items[e],n,r);if("number"==typeof i)e=i-1;else{if(i===d)return d;i===_&&(t.items.splice(e,1),e-=1)}}}else if(u(t)){r=Object.freeze(r.concat(t));const e=v("key",t.key,n,r);if(e===d)return d;e===_&&(t.key=null);const i=v("value",t.value,n,r);if(i===d)return d;i===_&&(t.value=null)}return i}b.BREAK=d,b.SKIP=g,b.REMOVE=_;const w={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class k{constructor(e,t){this.marker=null,this.yaml=Object.assign({},k.defaultYaml,e),this.tags=Object.assign({},k.defaultTags,t)}atDocument(){const e=new k(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:k.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},k.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:k.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},k.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,!0),!1)}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/);r||t(`The ${e} tag has no suffix`);const i=this.tags[n];return i?i+decodeURIComponent(r):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>w[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&m(e.contents)){const t={};b(e.contents,((e,n)=>{m(n)&&n.tag&&(t[n.tag]=!0)})),r=Object.keys(t)}else r=[];for(const[i,o]of n)"!!"===i&&"tag:yaml.org,2002:"===o||e&&!r.some((e=>e.startsWith(o)))||t.push(`%TAG ${i} ${o}`);return t.join("\n")}}function O(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function E(e){const t=new Set;return b(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function S(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}k.defaultYaml={explicit:!1,version:"1.2"},k.defaultTags={"!!":"tag:yaml.org,2002:"};class x extends y{constructor(t){super(e),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return b(e,{Node:(e,n)=>{if(n===this)return b.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:i}=t,o=this.resolve(r);if(!o){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const s=n.get(o);if(!s||void 0===s.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(i>=0&&(s.count+=1,0===s.aliasCount&&(s.aliasCount=N(r,o,n)),s.count*s.aliasCount>i))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return s.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(O(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function N(e,t,n){if(a(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}if(h(t)){let r=0;for(const i of t.items){const t=N(e,i,n);t>r&&(r=t)}return r}if(u(t)){const r=N(e,t.key,n),i=N(e,t.value,n);return Math.max(r,i)}return 1}function j(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>j(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||!f(r=e)&&!h(r)||!r.anchor)return e.toJSON(t,n);const i={aliasCount:0,count:1,res:void 0};n.anchors.set(e,i),n.onCreate=e=>{i.res=e,delete n.onCreate};const o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}var r;return"bigint"!=typeof e||n&&n.keep?e:Number(e)}const T=e=>!e||"function"!=typeof e&&"object"!=typeof e;class A extends y{constructor(e){super(i),this.value=e}toJSON(e,t){return t&&t.keep?this.value:j(this.value,e,t)}toString(){return String(this.value)}}function I(e,t,r){var i,s;if(m(e))return e;if(u(e)){const t=null===(s=(i=r.schema[n]).createNode)||void 0===s?void 0:s.call(i,r.schema,null,r);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"function"==typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{onAnchor:a,onTagObj:c,schema:l,sourceObjects:f}=r;let p;if(e&&"object"==typeof e){if(p=f.get(e),p)return p.anchor||(p.anchor=a(e)),new x(p.anchor);p={anchor:null,node:null},f.set(e,p)}t&&t.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let h=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),r=e.find((e=>!e.format))||e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify&&t.identify(e)&&!t.format))}(e,t,l.tags);if(!h){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e)return new A(e);h=e instanceof Map?l[n]:Symbol.iterator in Object(e)?l[o]:l[n]}c&&(c(h),delete r.onTagObj);const y=(null==h?void 0:h.createNode)?h.createNode(r.schema,e,r):new A(e);return t&&(y.tag=t),p&&(p.node=y),y}function C(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else{const e={};Object.defineProperty(e,"symbol"==typeof n?n:String(n),{value:r,writable:!0,enumerable:!0,configurable:!0}),r=e}}return I(r,void 0,{onAnchor(){throw new Error("Repeated objects are not supported here")},schema:e,sourceObjects:new Map})}A.BLOCK_FOLDED="BLOCK_FOLDED",A.BLOCK_LITERAL="BLOCK_LITERAL",A.PLAIN="PLAIN",A.QUOTE_DOUBLE="QUOTE_DOUBLE",A.QUOTE_SINGLE="QUOTE_SINGLE";const $=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class L extends y{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}addIn(e,t){if($(e))this.add(t);else{const[n,...r]=e,i=this.get(n,!0);if(h(i))i.addIn(r,t);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,C(this.schema,r,t))}}}deleteIn([e,...t]){if(0===t.length)return this.delete(e);const n=this.get(e,!0);if(h(n))return n.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}getIn([e,...t],n){const r=this.get(e,!0);return 0===t.length?!n&&f(r)?r.value:r:h(r)?r.getIn(t,n):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!u(t))return!1;const n=t.value;return null==n||e&&f(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn([e,...t]){if(0===t.length)return this.has(e);const n=this.get(e,!0);return!!h(n)&&n.hasIn(t)}setIn([e,...t],n){if(0===t.length)this.set(e,n);else{const r=this.get(e,!0);if(h(r))r.setIn(t,n);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`);this.set(e,C(this.schema,t,n))}}}}function P(e,t,n){return n?n.includes("\n")?`${e}\n`+n.replace(/^/gm,`${t||""}#`):e.endsWith(" ")?`${e}#${n}`:`${e} #${n}`:e}L.maxFlowStringSingleLineLength=60;const B="flow",R="block",F="quoted";function M(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return e;const c=Math.max(1+o,1+i-t.length);if(e.length<=c)return e;const l=[],u={};let f,p,h=i-t.length;"number"==typeof r&&(r>i-Math.max(2,o)?l.push(0):h=i-r);let m,y=!1,d=-1,g=-1,_=-1;for(n===R&&(d=q(e,d),-1!==d&&(h=d+c));m=e[d+=1];){if(n===F&&"\\"===m){switch(g=d,e[d+1]){case"x":d+=3;break;case"u":d+=5;break;case"U":d+=9;break;default:d+=1}_=d}if("\n"===m)n===R&&(d=q(e,d)),h=d+c,f=void 0;else{if(" "===m&&p&&" "!==p&&"\n"!==p&&"\t"!==p){const t=e[d+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(f=d)}if(d>=h)if(f)l.push(f),h=f+c,f=void 0;else if(n===F){for(;" "===p||"\t"===p;)p=m,m=e[d+=1],y=!0;const t=d>_+1?d-2:g-1;if(u[t])return e;l.push(t),u[t]=!0,h=t+c,f=void 0}else y=!0}p=m}if(y&&a&&a(),0===l.length)return e;s&&s();let b=e.slice(0,l[0]);for(let r=0;r<l.length;++r){const i=l[r],o=l[r+1]||e.length;0===i?b=`\n${t}${e.slice(0,o)}`:(n===F&&u[i]&&(b+=`${e[i]}\\`),b+=`\n${t}${e.slice(i+1,o)}`)}return b}function q(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const K=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),D=e=>/^(%|---|\.\.\.)/m.test(e);function U(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(D(e)?"  ":"");let s="",a=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(s+=n.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{s+=n.slice(a,e);const t=n.substr(e+2,4);switch(t){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:"00"===t.substr(0,2)?s+="\\x"+t.substr(2):s+=n.substr(e,6)}e+=5,a=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<i)e+=1;else{for(s+=n.slice(a,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)s+="\n",e+=2;s+=o," "===n[e+2]&&(s+="\\"),e+=1,a=e+1}break;default:e+=1}return s=a?s+n.slice(a):n,r?s:M(s,o,F,K(t))}function V(e,t){if(t.implicitKey){if(/\n/.test(e))return U(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return U(e,t);const n=t.indent||(D(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:M(r,n,B,K(t))}function G({comment:e,type:t,value:n},r,i,o){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return U(n,r);const s=r.indent||(r.forceBlockIndent||D(n)?"  ":""),a=t!==A.BLOCK_FOLDED&&(t===A.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let t=0,n=0;t<i;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,i-n<=r)return!1}return!0}(n,r.options.lineWidth,s.length));if(!n)return a?"|\n":">\n";let c,l;for(l=n.length;l>0;--l){const e=n[l-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let u=n.substring(l);const f=u.indexOf("\n");-1===f?c="-":n===u||f!==u.length-1?(c="+",o&&o()):c="",u&&(n=n.slice(0,-u.length),"\n"===u[u.length-1]&&(u=u.slice(0,-1)),u=u.replace(/\n+(?!\n|$)/g,`$&${s}`));let p,h=!1,m=-1;for(p=0;p<n.length;++p){const e=n[p];if(" "===e)h=!0;else{if("\n"!==e)break;m=p}}let y=n.substring(0,m<p?m+1:p);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${s}`));let d=(a?"|":">")+(h?s?"2":"1":"")+c;return e&&(d+=" #"+e.replace(/ ?[\r\n]+/g," "),i&&i()),a?`${d}\n${s}${y}${n=n.replace(/\n+/g,`$&${s}`)}${u}`:`${d}\n${s}${M(`${y}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${s}`)}${u}`,s,R,K(r))}`}function J(e,t,n,r){const{implicitKey:i,inFlow:o}=t,s="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==A.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=A.QUOTE_DOUBLE);const c=e=>{switch(e){case A.BLOCK_FOLDED:case A.BLOCK_LITERAL:return i||o?U(s.value,t):G(s,t,n,r);case A.QUOTE_DOUBLE:return U(s.value,t);case A.QUOTE_SINGLE:return V(s.value,t);case A.PLAIN:return function(e,t,n,r){var i;const{type:o,value:s}=e,{actualString:a,implicitKey:c,indent:l,inFlow:u}=t;if(c&&/[\n[\]{},]/.test(s)||u&&/[[\]{},]/.test(s))return U(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s)){const i=-1!==s.indexOf('"'),o=-1!==s.indexOf("'");let a;return a=i&&!o?V:o&&!i?U:t.options.singleQuote?V:U,c||u||-1===s.indexOf("\n")?a(s,t):G(e,t,n,r)}if(!c&&!u&&o!==A.PLAIN&&-1!==s.indexOf("\n"))return G(e,t,n,r);if(""===l&&D(s))return t.forceBlockIndent=!0,G(e,t,n,r);const f=s.replace(/\n+/g,`$&\n${l}`);if(a)for(const e of t.doc.schema.tags)if(e.default&&"tag:yaml.org,2002:str"!==e.tag&&(null===(i=e.test)||void 0===i?void 0:i.test(f)))return U(s,t);return c?f:M(f,l,B,K(t))}(s,t,n,r);default:return null}};let l=c(a);if(null===l){const{defaultKeyType:e,defaultStringType:n}=t.options,r=i&&e||n;if(l=c(r),null===l)throw new Error(`Unsupported default string type ${r}`)}return l}const z=(e,t)=>({anchors:new Set,doc:e,indent:"",indentStep:"number"==typeof t.indent?" ".repeat(t.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true",verifyAliasOrder:!0},t)});function W(e,t,n,r){if(u(e))return e.toString(t,n,r);if(a(e))return e.toString(t);let i;const o=m(e)?e:t.doc.createNode(e,{onTagObj:e=>i=e});i||(i=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))||n[0]}let n,r;if(f(t)){r=t.value;const i=e.filter((e=>e.identify&&e.identify(r)));n=i.find((e=>e.format===t.format))||i.find((e=>!e.format))}else r=t,n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass));if(!n){const e=r&&r.constructor?r.constructor.name:typeof r;throw new Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,o));const s=function(e,t,{anchors:n,doc:r}){const i=[],o=(f(e)||h(e))&&e.anchor;return o&&O(o)&&(n.add(o),i.push(`&${o}`)),e.tag?i.push(r.directives.tagString(e.tag)):t.default||i.push(r.directives.tagString(t.tag)),i.join(" ")}(o,i,t);s.length>0&&(t.indentAtStart=(t.indentAtStart||0)+s.length+1);const c="function"==typeof i.stringify?i.stringify(o,t,n,r):f(o)?J(o,t,n,r):o.toString(t,n,r);return s?f(o)||"{"===c[0]||"["===c[0]?`${s} ${c}`:`${s}\n${t.indent}${c}`:c}function Y(e,t){"debug"!==e&&"warn"!==e||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(t):console.warn(t))}function H(e,t,{key:n,value:r}){if(e&&e.doc.schema.merge&&Q(n))if(p(r))for(const n of r.items)X(e,t,n);else if(Array.isArray(r))for(const n of r)X(e,t,n);else X(e,t,r);else{const i=j(n,"",e);if(t instanceof Map)t.set(i,j(r,i,e));else if(t instanceof Set)t.add(i);else{const o=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(m(e)&&n&&n.doc){const t=z(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),Y(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,i,e),s=j(r,o,e);o in t?Object.defineProperty(t,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):t[o]=s}}return t}const Q=e=>"<<"===e||f(e)&&"<<"===e.value&&(!e.type||e.type===A.PLAIN);function X(e,t,n){const r=e&&a(n)?n.resolve(e.doc):null;if(!l(r))throw new Error("Merge sources must be map aliases");const i=r.toJSON(null,e,Map);for(const[e,n]of i)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function Z(e,t,n){const r=I(e,void 0,n),i=I(t,void 0,n);return new ee(r,i)}class ee{constructor(e,t=null){Object.defineProperty(this,s,{value:r}),this.key=e,this.value=t}toJSON(e,t){return H(t,t&&t.mapAsMap?new Map:{},this)}toString(e,t,n){return e&&e.doc?function({key:e,value:t},n,r,i){const{allNullValues:o,doc:s,indent:a,indentStep:c,options:{indentSeq:l,simpleKeys:u}}=n;let y=m(e)&&e.comment||null;if(u){if(y)throw new Error("With simple keys, key nodes cannot have comments");if(h(e))throw new Error("With simple keys, collection cannot be used as a key value")}let d=!u&&(!e||y&&null==t&&!n.inFlow||h(e)||(f(e)?e.type===A.BLOCK_FOLDED||e.type===A.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(u||!o),indent:a+c});let g=!1,_=!1,b=W(e,n,(()=>g=!0),(()=>_=!0));if(!d&&!n.inFlow&&b.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(o||null==t)return g&&r&&r(),d?`? ${b}`:b}else if(o&&!u||null==t&&d)return g&&(y=null),_&&!y&&i&&i(),P(`? ${b}`,n.indent,y);g&&(y=null),b=d?`? ${P(b,n.indent,y)}\n${a}:`:P(`${b}:`,n.indent,y);let v="",w=null;m(t)?(t.spaceBefore&&(v="\n"),t.commentBefore&&(v+=`\n${t.commentBefore.replace(/^/gm,`${n.indent}#`)}`),w=t.comment):t&&"object"==typeof t&&(t=s.createNode(t)),n.implicitKey=!1,d||y||!f(t)||(n.indentAtStart=b.length+1),_=!1,l||!(c.length>=2)||n.inFlow||d||!p(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substr(2));let k=!1;const O=W(t,n,(()=>k=!0),(()=>_=!0));let E=" ";return v||y?E=`${v}\n${n.indent}`:!d&&h(t)?("["===O[0]||"{"===O[0])&&!O.includes("\n")||(E=`\n${n.indent}`):"\n"===O[0]&&(E=""),n.inFlow?(k&&r&&r(),b+E+O):(k&&(w=null),_&&!w&&i&&i(),P(b+E+O,n.indent,w))}(this,e,t,n):JSON.stringify(this)}}const te={intAsBigInt:!1,logLevel:"warn",prettyErrors:!0,strict:!0,version:"1.2"};function ne({comment:e,flow:t,items:n},r,{blockItem:i,flowChars:o,itemIndent:s,onChompKeep:a,onComment:c}){const{indent:l,indentStep:f}=r,p=t||r.inFlow;p&&(s+=f),r=Object.assign({},r,{indent:s,inFlow:p,type:null});let h=!0,y=!1;const d=n.reduce(((e,t,i)=>{let o=null;if(m(t)){if(!y&&t.spaceBefore&&e.push({comment:!0,str:""}),t.commentBefore)for(const n of t.commentBefore.match(/^.*$/gm))e.push({comment:!0,str:`#${n}`});t.comment&&(o=t.comment,h=!1)}else if(u(t)){const n=m(t.key)?t.key:null;if(n){if(!y&&n.spaceBefore&&e.push({comment:!0,str:""}),n.commentBefore)for(const t of n.commentBefore.match(/^.*$/gm))e.push({comment:!0,str:`#${t}`});n.comment&&(h=!1)}if(p){const e=m(t.value)?t.value:null;e?(e.comment&&(o=e.comment),(e.comment||e.commentBefore)&&(h=!1)):null==t.value&&n&&n.comment&&(o=n.comment)}}y=!1;let a=W(t,r,(()=>o=null),(()=>y=!0));return p&&i<n.length-1&&(a+=","),a=P(a,s,o),y&&(o||p)&&(y=!1),e.push({comment:!1,str:a}),e}),[]);let g;if(0===d.length)g=o.start+o.end;else if(p){const{start:e,end:t}=o,n=d.map((e=>e.str));let r=2;for(const e of d){if(e.comment||e.str.includes("\n")){h=!1;break}r+=e.str.length+2}if(!h||r>L.maxFlowStringSingleLineLength){g=e;for(const e of n)g+=e?`\n${f}${l}${e}`:"\n";g+=`\n${l}${t}`}else g=`${e} ${n.join(" ")} ${t}`}else{const e=d.map(i);g=e.shift()||"";for(const t of e)g+=t?`\n${l}${t}`:"\n"}return e?(g+="\n"+e.replace(/^/gm,`${l}#`),c&&c()):y&&a&&a(),g}function re(e,t){const n=f(t)?t.value:t;for(const r of e)if(u(r)){if(r.key===t||r.key===n)return r;if(f(r.key)&&r.key.value===n)return r}}class ie extends L{constructor(e){super(n,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;n=u(e)?e:new ee(e&&"object"==typeof e&&"key"in e?e.key:e,e.value);const r=re(this.items,n.key),i=this.schema&&this.schema.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);f(r.value)&&T(n.value)?r.value.value=n.value:r.value=n.value}else if(i){const e=this.items.findIndex((e=>i(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=re(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=re(this.items,e),r=n&&n.value;return!t&&f(r)?r.value:r}has(e){return!!re(this.items,e)}set(e,t){this.add(new ee(e,t),!0)}toJSON(e,t,n){const r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);for(const e of this.items)H(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!u(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ne(this,e,{blockItem:e=>e.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const oe={collection:"map",createNode:function(e,t,n){const{keepUndefined:r,replacer:i}=n,o=new ie(e),s=(e,s)=>{if("function"==typeof i)s=i.call(t,e,s);else if(Array.isArray(i)&&!i.includes(e))return;(void 0!==s||r)&&o.items.push(Z(e,s,n))};if(t instanceof Map)for(const[e,n]of t)s(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))s(e,t[e]);return"function"==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o},default:!0,nodeClass:ie,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(l(e)||t("Expected a mapping for this tag"),e)};class se extends L{constructor(e){super(o,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=ae(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const n=ae(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&f(r)?r.value:r}has(e){const t=ae(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=ae(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];f(r)&&T(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t&&t.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(j(e,String(r++),t));return n}toString(e,t,n){return e?ne(this,e,{blockItem:e=>e.comment?e.str:`- ${e.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}}function ae(e){let t=f(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const ce={collection:"seq",createNode:function(e,t,n){const{replacer:r}=n,i=new se(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if("function"==typeof r){const n=t instanceof Set?o:String(e++);o=r.call(t,n,o)}i.items.push(I(o,void 0,n))}}return i},default:!0,nodeClass:se,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(p(e)||t("Expected a sequence for this tag"),e)},le={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>J(e,t=Object.assign({actualString:!0},t),n,r)},ue={identify:e=>null==e,createNode:()=>new A(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new A(null),stringify:({source:e},t)=>e&&ue.test.test(e)?e:t.options.nullStr},fe={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new A("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},n)=>e&&fe.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?n.options.trueStr:n.options.falseStr};function pe({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);const i="number"==typeof r?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let e=o.indexOf(".");e<0&&(e=o.length,o+=".");let n=t-(o.length-e-1);for(;n-- >0;)o+="0"}return o}const he={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:pe},me={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify:({value:e})=>Number(e).toExponential()},ye={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new A(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:pe},de=e=>"bigint"==typeof e||Number.isInteger(e),ge=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function _e(e,t,n){const{value:r}=e;return de(r)&&r>=0?n+r.toString(t):pe(e)}const be={identify:e=>de(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>ge(e,2,8,n),stringify:e=>_e(e,8,"0o")},ve={identify:de,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>ge(e,0,10,n),stringify:pe},we={identify:e=>de(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>ge(e,2,16,n),stringify:e=>_e(e,16,"0x")},ke=[oe,ce,le,ue,fe,be,ve,we,he,me,ye];function Oe(e){return"bigint"==typeof e||Number.isInteger(e)}const Ee=({value:e})=>JSON.stringify(e),Se=[oe,ce].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Ee},{identify:e=>null==e,createNode:()=>new A(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ee},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:Ee},{identify:Oe,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Oe(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Ee}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),xe={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,i,o){const s=n;let a;if("function"==typeof Buffer)a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<s.length;++t)e+=String.fromCharCode(s[t]);a=btoa(e)}}if(t||(t=A.BLOCK_LITERAL),t!==A.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(a.length/e),i=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)i[t]=a.substr(r,e);a=i.join(t===A.BLOCK_LITERAL?"\n":" ")}return J({comment:e,type:t,value:a},r,i,o)}};function Ne(e,t){if(p(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!u(r)){if(l(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const e=r.items[0]||new ee(new A(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value||e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=u(r)?r:new ee(r)}}else t("Expected a sequence for this tag");return e}function je(e,t,n){const{replacer:r}=n,i=new se(e);i.tag="tag:yaml.org,2002:pairs";let o=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let s,a;if("function"==typeof r&&(e=r.call(t,String(o++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);s=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);s=t[0],a=e[s]}else s=e;i.items.push(Z(s,a,n))}return i}const Te={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ne,createNode:je};class Ae extends se{constructor(){super(),this.add=ie.prototype.add.bind(this),this.delete=ie.prototype.delete.bind(this),this.get=ie.prototype.get.bind(this),this.has=ie.prototype.has.bind(this),this.set=ie.prototype.set.bind(this),this.tag=Ae.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t&&t.onCreate&&t.onCreate(n);for(const e of this.items){let r,i;if(u(e)?(r=j(e.key,"",t),i=j(e.value,r,t)):r=j(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,i)}return n}}Ae.tag="tag:yaml.org,2002:omap";const Ie={collection:"seq",identify:e=>e instanceof Map,nodeClass:Ae,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Ne(e,t),r=[];for(const{key:e}of n.items)f(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new Ae,n)},createNode(e,t,n){const r=je(e,t,n),i=new Ae;return i.items=r.items,i}};function Ce({value:e,source:t},n){return t&&(e?$e:Le).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const $e={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new A(!0),stringify:Ce},Le={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new A(!1),stringify:Ce},Pe={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:pe},Be={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify:({value:e})=>Number(e).toExponential()},Re={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new A(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:pe},Fe=e=>"bigint"==typeof e||Number.isInteger(e);function Me(e,t,n,{intAsBigInt:r}){const i=e[0];if("-"!==i&&"+"!==i||(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===i?BigInt(-1)*t:t}const o=parseInt(e,n);return"-"===i?-1*o:o}function qe(e,t,n){const{value:r}=e;if(Fe(r)){const e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return pe(e)}const Ke={identify:Fe,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Me(e,2,2,n),stringify:e=>qe(e,2,"0b")},De={identify:Fe,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Me(e,1,8,n),stringify:e=>qe(e,8,"0")},Ue={identify:Fe,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Me(e,0,10,n),stringify:pe},Ve={identify:Fe,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Me(e,2,16,n),stringify:e=>qe(e,16,"0x")};class Ge extends ie{constructor(e){super(e),this.tag=Ge.tag}add(e){let t;t=u(e)?e:"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new ee(e.key,null):new ee(e,null),re(this.items,t.key)||this.items.push(t)}get(e,t){const n=re(this.items,e);return!t&&u(n)?f(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=re(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new ee(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}Ge.tag="tag:yaml.org,2002:set";const Je={collection:"map",identify:e=>e instanceof Set,nodeClass:Ge,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if(l(e)){if(e.hasAllNullValues(!0))return Object.assign(new Ge,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:r}=n,i=new Ge(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),i.items.push(Z(e,null,n));return i}};function ze(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,i=e=>t?BigInt(e):Number(e),o=r.replace(/_/g,"").split(":").reduce(((e,t)=>e*i(60)+i(t)),i(0));return"-"===n?i(-1)*o:o}function We(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return pe(e);let r="";t<0&&(r="-",t*=n(-1));const i=n(60),o=[t%i];return t<60?o.unshift(0):(t=(t-o[0])/i,o.unshift(t%i),t>=60&&(t=(t-o[0])/i,o.unshift(t))),r+o.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const Ye={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>ze(e,n),stringify:We},He={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>ze(e,!1),stringify:We},Qe={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(Qe.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,s,a]=t.map(Number),c=t[7]?Number((t[7]+"00").substr(1,3)):0;let l=Date.UTC(n,r-1,i,o||0,s||0,a||0,c);const u=t[8];if(u&&"Z"!==u){let e=ze(u,!1);Math.abs(e)<30&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Xe=[oe,ce,le,ue,$e,Le,Ke,De,Ue,Ve,Pe,Be,Re,xe,Ie,Te,Je,Ye,He,Qe],Ze={core:ke,failsafe:[oe,ce,le],json:Se,yaml11:Xe,"yaml-1.1":Xe},et={binary:xe,bool:fe,float:ye,floatExp:me,floatNaN:he,floatTime:He,int:ve,intHex:we,intOct:be,intTime:Ye,map:oe,null:ue,omap:Ie,pairs:Te,seq:ce,set:Je,timestamp:Qe},tt={"tag:yaml.org,2002:binary":xe,"tag:yaml.org,2002:omap":Ie,"tag:yaml.org,2002:pairs":Te,"tag:yaml.org,2002:set":Je,"tag:yaml.org,2002:timestamp":Qe},nt=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class rt{constructor({customTags:e,merge:t,resolveKnownTags:r,schema:s,sortMapEntries:a}){this.merge=!!t,this.name=s||"core",this.knownTags=r?tt:{},this.tags=function(e,t){let n=Ze[t];if(!n){const e=Object.keys(Ze).filter((e=>"yaml11"!==e)).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e}`)}if(Array.isArray(e))for(const t of e)n=n.concat(t);else"function"==typeof e&&(n=e(n.slice()));return n.map((e=>{if("string"!=typeof e)return e;const t=et[e];if(t)return t;const n=Object.keys(et).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}(e,this.name),Object.defineProperty(this,n,{value:oe}),Object.defineProperty(this,i,{value:le}),Object.defineProperty(this,o,{value:ce}),this.sortMapEntries=!0===a?nt:a||null}}function it(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){const n=r[t],i=it(e,r,String(t),n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}else if(r instanceof Map)for(const t of Array.from(r.keys())){const n=r.get(t),i=it(e,r,t,n);void 0===i?r.delete(t):i!==n&&r.set(t,i)}else if(r instanceof Set)for(const t of Array.from(r)){const n=it(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(const[t,n]of Object.entries(r)){const i=it(e,r,t,n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}return e.call(t,n,r)}class ot{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,s,{value:t});let i=null;"function"==typeof n||Array.isArray(n)?i=n:void 0===r&&n&&(r=n,n=void 0);const o=Object.assign({},te,r);this.options=o;let{version:a}=o;(null==r?void 0:r.directives)?(this.directives=r.directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new k({version:a}),this.setSchema(a,r),this.contents=void 0===e?null:this.createNode(e,i,r)}add(e){st(this.contents)&&this.contents.add(e)}addIn(e,t){st(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=E(this);e.anchor=!t||n.has(t)?S(t||"a",n):t}return new x(e.anchor)}createNode(e,t,n){let r;if("function"==typeof t)e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{anchorPrefix:i,flow:o,keepUndefined:s,onTagObj:a,tag:c}=n||{},{onAnchor:l,setAnchors:u,sourceObjects:p}=function(e,t){const n=[],r=new Map;let i=null;return{onAnchor(r){n.push(r),i||(i=E(e));const o=S(t,i);return i.add(o),o},setAnchors(){for(const e of n){const t=r.get(e);if("object"!=typeof t||!t.anchor||!f(t.node)&&!h(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,i||"a"),m=I(e,c,{keepUndefined:null!=s&&s,onAnchor:l,onTagObj:a,replacer:r,schema:this.schema,sourceObjects:p});return o&&h(m)&&(m.flow=!0),u(),m}createPair(e,t,n={}){const r=this.createNode(e,null,n),i=this.createNode(t,null,n);return new ee(r,i)}delete(e){return!!st(this.contents)&&this.contents.delete(e)}deleteIn(e){return $(e)?null!=this.contents&&(this.contents=null,!0):!!st(this.contents)&&this.contents.deleteIn(e)}get(e,t){return h(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return $(e)?!t&&f(this.contents)?this.contents.value:this.contents:h(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!h(this.contents)&&this.contents.has(e)}hasIn(e){return $(e)?void 0!==this.contents:!!h(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=C(this.schema,[e],t):st(this.contents)&&this.contents.set(e,t)}setIn(e,t){$(e)?this.contents=t:null==this.contents?this.contents=C(this.schema,Array.from(e),t):st(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t){let n;switch(String(e)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},t);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},t);break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${t}`)}}this.schema=new rt(n)}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){const s={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100,stringify:W},a=j(this.contents,t||"",s);if("function"==typeof i)for(const{count:e,res:t}of s.anchors.values())i(t,e);return"function"==typeof o?it(o,{"":a},"",a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.marker&&(r=!0)}r&&n.push("---"),e.commentBefore&&(1!==n.length&&n.unshift(""),n.unshift(e.commentBefore.replace(/^/gm,"#")));const i=z(e,t);let o=!1,s=null;if(e.contents){m(e.contents)&&(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore&&n.push(e.contents.commentBefore.replace(/^/gm,"#")),i.forceBlockIndent=!!e.comment,s=e.contents.comment);const t=s?void 0:()=>o=!0;let a=W(e.contents,i,(()=>s=null),t);s&&(a=P(a,"",s)),"|"!==a[0]&&">"!==a[0]||"---"!==n[n.length-1]?n.push(a):n[n.length-1]=`--- ${a}`}else n.push(W(e.contents,i));return e.comment&&(o&&!s||""===n[n.length-1]||n.push(""),n.push(e.comment.replace(/^/gm,"#"))),n.join("\n")+"\n"}(this,e)}}function st(e){if(h(e))return!0;throw new Error("Expected a YAML collection as document contents")}class at extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class ct extends at{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class lt extends at{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const ut=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,s=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){const e=Math.min(o-39,s.length-79);s="â€¦"+s.substring(e),o-=e-1}if(s.length>80&&(s=s.substring(0,79)+"â€¦"),r>1&&/^ *$/.test(s.substring(0,o))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"â€¦\n"),s=n+s}if(/[^ ]/.test(s)){let e=1;const t=n.linePos[1];t&&t.line===r&&t.col>i&&(e=Math.min(t.col-i,80-o));const a=" ".repeat(o)+"^".repeat(e);n.message+=`:\n\n${s}\n${a}\n`}};function ft(e,{ctx:t,flow:n,indicator:r,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",f="",p=!1,h=null,m=null,y=null,d=null,g=null;for(const i of e)switch(i.type){case"space":!n&&c&&"doc-start"!==r&&"\t"===i.source[0]&&o(i,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{t.options.strict&&!l&&o(i,"COMMENT_SPACE","Comments must be separated from other tokens by white space characters");const e=i.source.substring(1);u?u+=f+e:u=e,f="";break}case"newline":c&&!u&&(a=!0),c=!0,p=!0,l=!0,f+=i.source;break;case"anchor":h&&o(i,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=i,null===g&&(g=i.offset),c=!1,l=!1;break;case"tag":m&&o(i,"MULTIPLE_TAGS","A node can have at most one tag"),m=i,null===g&&(g=i.offset),c=!1,l=!1;break;case r:(h||m)&&o(i,"BAD_PROP_ORDER",`Anchors and tags must be after the ${i.source} indicator`),d=i,c=!1,l=!1;break;case"comma":if(n){y&&o(i,"UNEXPECTED_TOKEN",`Unexpected , in ${n}`),y=i,c=!1,l=!1;break}default:o(i,"UNEXPECTED_TOKEN",`Unexpected ${i.type} token`),c=!1,l=!1}const _=e[e.length-1],b=_?_.offset+_.source.length:i;return{comma:y,found:d,spaceBefore:a,comment:u,hasNewline:p,anchor:h,tag:m,end:b,start:null!=g?g:b}}function pt(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(pt(t.key)||pt(t.value))return!0}return!1;default:return!0}}const ht="All mapping items must start at the same column";function mt(e,t,n,r){let i="";if(e){let o=!1,s="";for(const a of e){const{source:e,type:c}=a;switch(c){case"space":o=!0;break;case"comment":{n&&!o&&r(a,"COMMENT_SPACE","Comments must be separated from other tokens by white space characters");const t=e.substring(1);i?i+=s+t:i=t,s="";break}case"newline":i&&(s+=e),o=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=e.length}}return{comment:i,offset:t}}const yt="Block collections are not allowed within flow collections",dt=e=>e&&("block-map"===e.type||"block-seq"===e.type);function gt(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/ys,n=/[ \t]*(.*?)[ \t]*\r?\n/ys}let r=t.exec(e);if(!r)return e;let i=r[1],o=" ",s=t.lastIndex;for(n.lastIndex=s;r=n.exec(e);)""===r[1]?"\n"===o?i+=o:o="\n":(i+=o+r[1],o=" "),s=n.lastIndex;const a=/[ \t]*(.*)/ys;return a.lastIndex=s,r=a.exec(e),i+o+(r&&r[1]||"")}function _t(e,t){let n="",r=e[t+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==e[t+2]);)"\n"===r&&(n+="\n"),r=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const bt={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"Â…",_:"Â ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function vt(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const i=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),i}return String.fromCodePoint(o)}function wt(e,t,n,r){const{value:o,type:s,comment:a,range:c}="block-scalar"===t.type?function(e,t,n){const r=e.offset,i=function({offset:e,props:t},n,r){if("block-scalar-header"!==t[0].type)return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],o=i[0];let s=0,a="",c=-1;for(let t=1;t<i.length;++t){const n=i[t];if(a||"-"!==n&&"+"!==n){const r=Number(n);!s&&r?s=r:-1===c&&(c=e+t)}else a=n}-1!==c&&r(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",f=i.length;for(let e=1;e<t.length;++e){const i=t[e];switch(i.type){case"space":l=!0;case"newline":f+=i.source.length;break;case"comment":n&&!l&&r(i,"COMMENT_SPACE","Comments must be separated from other tokens by white space characters"),f+=i.source.length,u=i.source.substring(1);break;case"error":r(i,"UNEXPECTED_TOKEN",i.message),f+=i.source.length;break;default:{r(i,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${i.type}`);const e=i.source;e&&"string"==typeof e&&(f+=e.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:f}}(e,t,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=">"===i.mode?A.BLOCK_FOLDED:A.BLOCK_LITERAL,s=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),i=[r&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)i.push([t[e],t[e+1]]);return i}(e.source):[];let a=s.length;for(let e=s.length-1;e>=0;--e){const t=s[e][1];if(""!==t&&"\r"!==t)break;a=e}if(!e.source||0===a){const t="+"===i.chomp?s.map((e=>e[0])).join("\n"):"";let n=r+i.length;return e.source&&(n+=e.source.length),{value:t,type:o,comment:i.comment,range:[r,n,n]}}let c=e.indent+i.indent,l=e.offset+i.length,u=0;for(let e=0;e<a;++e){const[t,r]=s[e];if(""!==r&&"\r"!==r){if(t.length<c){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,"MISSING_CHAR",e)}0===i.indent&&(c=t.length),u=e;break}0===i.indent&&t.length>c&&(c=t.length),l+=t.length+r.length+1}let f="",p="",h=!1;for(let e=0;e<u;++e)f+=s[e][0].slice(c)+"\n";for(let e=u;e<a;++e){let[t,r]=s[e];l+=t.length+r.length+1;const a="\r"===r[r.length-1];if(a&&(r=r.slice(0,-1)),r&&t.length<c){const e="Block scalar lines must not be less indented than their "+(i.indent?"explicit indentation indicator":"first line");n(l-r.length-(a?2:1),"BAD_INDENT",e),t=""}o===A.BLOCK_LITERAL?(f+=p+t.slice(c)+r,p="\n"):t.length>c||"\t"===r[0]?(" "===p?p="\n":h||"\n"!==p||(p="\n\n"),f+=p+t.slice(c)+r,p="\n",h=!0):""===r?"\n"===p?f+="\n":p="\n":(f+=p+r,p=" ",h=!1)}switch(i.chomp){case"-":break;case"+":for(let e=a;e<s.length;++e)f+="\n"+s[e][0].slice(c);"\n"!==f[f.length-1]&&(f+="\n");break;default:f+="\n"}const m=r+i.length+e.source.length;return{value:f,type:o,comment:i.comment,range:[r,m,m]}}(t,e.options.strict,r):function(e,t,n){const{offset:r,type:i,source:o,end:s}=e;let a,c;const l=(e,t,i)=>n(r+e,t,i);switch(i){case"scalar":a=A.PLAIN,c=function(e,t){let n="";switch(e[0]){case"\t":n="Plain value cannot start with a tab character";break;case"|":case">":n=`Plain value cannot start with block scalar indicator ${e[0]}`;break;case"@":case"`":n=`Plain value cannot start with reserved character ${e[0]}`}return n&&t(0,"BAD_SCALAR_START",n),gt(e)}(o,l);break;case"single-quoted-scalar":a=A.QUOTE_SINGLE,c=function(e,t){return"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),gt(e.slice(1,-1)).replace(/''/g,"'")}(o,l);break;case"double-quoted-scalar":a=A.QUOTE_DOUBLE,c=function(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if("\r"!==i||"\n"!==e[r+1])if("\n"===i){const{fold:t,offset:i}=_t(e,r);n+=t,r=i}else if("\\"===i){let i=e[++r];const o=bt[i];if(o)n+=o;else if("\n"===i)for(i=e[r+1];" "===i||"\t"===i;)i=e[1+ ++r];else if("x"===i||"u"===i||"U"===i){const o={x:2,u:4,U:8}[i];n+=vt(e,r+1,o,t),r+=o}else{const i=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),n+=i}}else if(" "===i||"\t"===i){const t=r;let o=e[r+1];for(;" "===o||"\t"===o;)o=e[1+ ++r];"\n"!==o&&(n+=r>t?e.slice(t,r+1):i)}else n+=i}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}(o,l);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const u=r+o.length,f=mt(s,u,t,n);return{value:c,type:a,comment:f.comment,range:[r,u,f.offset]}}(t,e.options.strict,r),l=n?e.directives.tagName(n.source,(e=>r(n,"TAG_RESOLVE_FAILED",e))):null,u=n&&l?function(e,t,n,r,o){var s;if("!"===n)return e[i];const a=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;a.push(t)}for(const e of a)if(null===(s=e.test)||void 0===s?void 0:s.test(t))return e;const c=e.knownTags[n];return c&&!c.collection?(e.tags.push(Object.assign({},c,{default:!1,test:void 0})),c):(o(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[i])}(e.schema,o,l,n,r):function(e,t,n){var r;if(n)for(const n of e.tags)if(n.default&&(null===(r=n.test)||void 0===r?void 0:r.test(t)))return n;return e[i]}(e.schema,o,"scalar"===t.type);let p;try{const i=u.resolve(o,(e=>r(n||t,"TAG_RESOLVE_FAILED",e)),e.options);p=f(i)?i:new A(i)}catch(e){r(n||t,"TAG_RESOLVE_FAILED",e.message),p=new A(o)}return p.range=c,p.source=o,s&&(p.type=s),l&&(p.tag=l),u.format&&(p.format=u.format),a&&(p.comment=a),p}function kt(e,t,n){if(t){null===n&&(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++r];"space"===(null==n?void 0:n.type);)e+=n.source.length,n=t[++r];break}}return e}const Ot={composeNode:Et,composeEmptyNode:St};function Et(e,t,n,r){const{spaceBefore:i,comment:o,anchor:s,tag:a}=n;let c;switch(t.type){case"alias":c=function({options:e},{offset:t,source:n,end:r},i){const o=new x(n.substring(1)),s=t+n.length,a=mt(r,s,e.strict,i);return o.range=[t,s,a.offset],a.comment&&(o.comment=a.comment),o}(e,t,r),(s||a)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=wt(e,t,a,r),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=function(e,t,n,r,i){let o;switch(n.type){case"block-map":o=function({composeNode:e,composeEmptyNode:t},n,r,i){var o;const s=new ie(n.schema);let a=r.offset;for(const{start:c,key:l,sep:u,value:f}of r.items){const p=ft(c,{ctx:n,indicator:"explicit-key-ind",offset:a,onError:i,startOnNewline:!0}),h=!p.found;if(h){if(l&&("block-seq"===l.type?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in l&&l.indent!==r.indent&&i(a,"BAD_INDENT",ht)),!p.anchor&&!p.tag&&!u){p.comment&&(s.comment?s.comment+="\n"+p.comment:s.comment=p.comment);continue}}else(null===(o=p.found)||void 0===o?void 0:o.indent)!==r.indent&&i(a,"BAD_INDENT",ht);h&&pt(l)&&i(l,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");const m=p.end,y=l?e(n,l,p,i):t(n,m,c,null,p,i),d=ft(u||[],{ctx:n,indicator:"map-value-ind",offset:y.range[2],onError:i,startOnNewline:!l||"block-scalar"===l.type});if(a=d.end,d.found){h&&("block-map"!==(null==f?void 0:f.type)||d.hasNewline||i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&p.start<d.found.offset-1024&&i(y.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const r=f?e(n,f,d,i):t(n,a,u,null,d,i);a=r.range[2],s.items.push(new ee(y,r))}else h&&i(y.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),d.comment&&(y.comment?y.comment+="\n"+d.comment:y.comment=d.comment),s.items.push(new ee(y))}return s.range=[r.offset,a,a],s}(e,t,n,i);break;case"block-seq":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o=new se(n.schema);let s=r.offset;for(const{start:a,value:c}of r.items){const r=ft(a,{ctx:n,indicator:"seq-item-ind",offset:s,onError:i,startOnNewline:!0});if(s=r.end,!r.found){if(!(r.anchor||r.tag||c)){r.comment&&(o.comment=r.comment);continue}c&&"block-seq"===c.type?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator")}const l=c?e(n,c,r,i):t(n,s,a,null,r,i);s=l.range[2],o.items.push(l)}return o.range=[r.offset,s,s],o}(e,t,n,i);break;case"flow-collection":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o="{"===r.start.source,s=o?"flow map":"flow sequence",a=o?new ie(n.schema):new se(n.schema);a.flow=!0;let c=r.offset;for(let l=0;l<r.items.length;++l){const{start:f,key:p,sep:h,value:m}=r.items[l],y=ft(f,{ctx:n,flow:s,indicator:"explicit-key-ind",offset:c,onError:i,startOnNewline:!1});if(!y.found){if(!(y.anchor||y.tag||h||m)){0===l&&y.comma?i(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):l<r.items.length-1&&i(y.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),y.comment&&(a.comment?a.comment+="\n"+y.comment:a.comment=y.comment);continue}!o&&n.options.strict&&pt(p)&&i(p,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===l)y.comma&&i(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(y.comma||i(y.start,"MISSING_CHAR",`Missing , between ${s} items`),y.comment){let e="";e:for(const t of f)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=a.items[a.items.length-1];u(t)&&(t=t.value||t.key),t.comment?t.comment+="\n"+e:t.comment=e,y.comment=y.comment.substring(e.length+1)}}if(o||h||y.found){const r=y.end,l=p?e(n,p,y,i):t(n,r,f,null,y,i);dt(p)&&i(l.range,"BLOCK_IN_FLOW",yt);const u=ft(h||[],{ctx:n,flow:s,indicator:"map-value-ind",offset:l.range[2],onError:i,startOnNewline:!1});if(u.found){if(!o&&!y.found&&n.options.strict){if(h)for(const e of h){if(e===u.found)break;if("newline"===e.type){i(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}y.start<u.found.offset-1024&&i(u.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else m&&("source"in m&&m.source&&":"===m.source[0]?i(m,"MISSING_CHAR",`Missing space after : in ${s}`):i(u.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const d=m?e(n,m,u,i):u.found?t(n,u.end,h,null,u,i):null;d?dt(m)&&i(d.range,"BLOCK_IN_FLOW",yt):u.comment&&(l.comment?l.comment+="\n"+u.comment:l.comment=u.comment);const g=new ee(l,d);if(o)a.items.push(g);else{const e=new ie(n.schema);e.flow=!0,e.items.push(g),a.items.push(e)}c=d?d.range[2]:u.end}else{const r=m?e(n,m,y,i):t(n,y.end,h,null,y,i);a.items.push(r),c=r.range[2],dt(m)&&i(r.range,"BLOCK_IN_FLOW",yt)}}const l=o?"}":"]",[f,...p]=r.end;let h=c;if(f&&f.source===l?h+=f.source.length:(i(c+1,"MISSING_CHAR",`Expected ${s} to end with ${l}`),f&&1!==f.source.length&&p.unshift(f)),p.length>0){const e=mt(p,h,n.options.strict,i);e.comment&&(a.comment?a.comment+="\n"+e.comment:a.comment=e.comment),a.range=[r.offset,h,e.offset]}else a.range=[r.offset,h,h];return a}(e,t,n,i)}if(!r)return o;const s=t.directives.tagName(r.source,(e=>i(r,"TAG_RESOLVE_FAILED",e)));if(!s)return o;const a=o.constructor;if("!"===s||s===a.tagName)return o.tag=a.tagName,o;const c=l(o)?"map":"seq";let f=t.schema.tags.find((e=>e.collection===c&&e.tag===s));if(!f){const e=t.schema.knownTags[s];if(!e||e.collection!==c)return i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o;t.schema.tags.push(Object.assign({},e,{default:!1})),f=e}const p=f.resolve(o,(e=>i(r,"TAG_RESOLVE_FAILED",e)),t.options),h=m(p)?p:new A(p);return h.range=o.range,h.tag=s,(null==f?void 0:f.format)&&(h.format=f.format),h}(Ot,e,t,a,r),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(t),new Error(`Unsupporten token type: ${t.type}`)}return i&&(c.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?c.comment=o:c.commentBefore=o),c}function St(e,t,n,r,{spaceBefore:i,comment:o,anchor:s,tag:a},c){const l=wt(e,{type:"scalar",offset:kt(t,n,r),indent:-1,source:""},a,c);return s&&(l.anchor=s.source.substring(1)),i&&(l.spaceBefore=!0),o&&(l.comment=o),l}function xt(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function Nt(e){let t="",n=!1,r=!1;for(let i=0;i<e.length;++i){const o=e[i];switch(o[0]){case"#":t+=(""===t?"":r?"\n\n":"\n")+o.substring(1),n=!0,r=!1;break;case"%":"#"!==e[i+1][0]&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class jt{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const i=xt(e);r?this.warnings.push(new lt(i,t,n)):this.errors.push(new ct(i,t,n))},this.directives=new k({version:e.version||te.version}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=Nt(this.prelude);if(n){const i=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.marker||!i)e.commentBefore=n;else if(h(i)&&!i.flow&&i.items.length>0){let e=i.items[0];u(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=i.commentBefore;i.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Nt(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,((t,n,r)=>{const i=xt(e);i[0]+=t,this.onError(i,"BAD_DIRECTIVE",n,r)})),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:r,value:i,end:o},s){const a=Object.assign({directives:t},e),c=new ot(void 0,a),l={directives:c.directives,options:c.options,schema:c.schema},u=ft(r,{ctx:l,indicator:"doc-start",offset:n,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,!i||"block-map"!==i.type&&"block-seq"!==i.type||u.hasNewline||s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?Et(l,i,u,s):St(l,u.end,r,null,u,s);const f=c.contents.range[2],p=mt(o,f,!1,s);return p.comment&&(c.comment=p.comment),c.range=[n,f,p.offset],c}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new ct(xt(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new ct(xt(e),"UNEXPECTED_TOKEN",t));break}const t=mt(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new ct(xt(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({directives:this.directives},this.options),n=new ot(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}const Tt=Symbol("break visit"),At=Symbol("skip children"),It=Symbol("remove item");function Ct(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),$t(Object.freeze([]),e,t)}function $t(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const i of["key","value"]){const o=t[i];if(o&&"items"in o){for(let t=0;t<o.items.length;++t){const r=$t(Object.freeze(e.concat([[i,t]])),o.items[t],n);if("number"==typeof r)t=r-1;else{if(r===Tt)return Tt;r===It&&(o.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===i&&(r=r(t,e))}}return"function"==typeof r?r(t,e):r}Ct.BREAK=Tt,Ct.SKIP=At,Ct.REMOVE=It,Ct.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n&&n[e];if(!t||!("items"in t))return;n=t.items[r]}return n},Ct.parentCollection=(e,t)=>{const n=Ct.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],i=n&&n[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Lt(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Pt=[",","[","]","{","}"],Bt=[" ",",","[","]","{","}","\n","\r","\t"],Rt=e=>!e||Bt.includes(e);class Ft{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e),this.atEnd=!t;let n=this.next||"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&Lt(this.buffer[e+3]))return-1}return e}getLine(){let e=this.buffer.indexOf("\n",this.pos);return-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\ufeff"===e[0]&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const r=e[n-1];" "!==r&&"\t"!==r||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&Lt(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&Lt(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Lt(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&Lt(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Rt),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),t=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=t)}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext("flow");if((-1!==n&&n<this.indentNext||0===n&&(r.startsWith("---")||r.startsWith("..."))&&Lt(r[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==r[0]&&"}"!==r[0]))return this.flowLevel=0,yield"",yield*this.parseLineStart();let i=0;for(;","===r[i];)i+=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));switch(i+=(yield*this.pushIndicators()),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Rt),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||Lt(e)||","===e)return yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}let n=this.buffer.indexOf("\n",this.pos);if(-1!==n&&n<t){for(;-1!==n&&n<t;){const e=this.continueScalar(n+1);if(-1===e)break;n=this.buffer.indexOf("\n",e)}-1!==n&&n<t&&(t=n-1)}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil((e=>Lt(e)||"#"===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let r=this.pos;e=this.buffer[r];++r)switch(e){case" ":n+=1;break;case"\n":t=r,n=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];for("\r"===n&&(n=this.buffer[--e]);" "===n||"\t"===n;)n=this.buffer[--e];if(!("\n"===n&&e>=this.pos))break;t=e}return yield"",yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(":"===t){const t=this.buffer[r+1];if(Lt(t)||e&&","===t)break;n=r}else if(Lt(t)){const i=this.buffer[r+1];if("#"===i||e&&Pt.includes(i))break;if("\r"===t&&("\n"===i?(r+=1,t="\n"):n=r),"\n"===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&Pt.includes(t))break;n=r}return t||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":if("<"===this.charAt(1))return(yield*this.pushVerbatimTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Rt))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(Lt(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushVerbatimTag(){let e=this.pos+2,t=this.buffer[e];for(;!Lt(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class Mt{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function qt(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function Kt(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function Dt(e){let t=!1;for(let n=0;n<e.length;++n)switch(e[n].type){case"space":break;case"comment":t=!0;break;case"newline":if(!t)return!1;break;default:return!1}if(t)for(let t=e.length-1;t>=0;--t)switch(e[t].type){case"space":break;case"newline":return!0;default:return!1}return!1}function Ut(e){switch(null==e?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Vt(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep||t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Gt(e){var t;if(0===e.length)return[];let n=e.length;e:for(;--n>=0;)switch(e[n].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===(null===(t=e[++n])||void 0===t?void 0:t.type););return e.splice(n,e.length)}function Jt(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||qt(t.start,"explicit-key-ind")||qt(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,Ut(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class zt{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ft,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e||this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"!==t.type&&"flow-collection"!==t.type||(t.indent="indent"in e?e.indent:-1),"flow-collection"===t.type&&Jt(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!qt(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&!Kt(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(Kt(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=Gt(Vt(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,!n.sep&&Dt(n.start)){const r=e.items[e.items.length-2],i=null===(t=null==r?void 0:r.value)||void 0===t?void 0:t.end;if(Array.isArray(i))return Array.prototype.push.apply(i,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken))}if(this.indent>=e.indent){const t=!this.onKeyLine&&this.indent===e.indent&&(n.sep||Kt(n.start));switch(this.type){case"anchor":case"tag":return void(t||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken));case"explicit-key-ind":return n.sep||qt(n.start,"explicit-key-ind")?t||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):n.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(n.sep)if(n.value||t&&!qt(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(qt(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(qt(n.start,"explicit-key-ind")&&Ut(n.key)&&!qt(n.sep,"newline")){const e=Gt(n.start),t=n.key,r=n.sep;r.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:t,sep:r}]})}else n.sep.push(this.sourceToken);else Object.assign(n,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(t||n.value?(e.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(r):(Object.assign(n,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r)return t&&"block-seq"!==r.type&&qt(n.start,"explicit-key-ind")&&e.items.push({start:[]}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(!n.value&&Dt(n.start)){const r=e.items[e.items.length-2],i=null===(t=null==r?void 0:r.value)||void 0===t?void 0:t.end;if(Array.isArray(i))return Array.prototype.push.apply(i,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken));case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;return void n.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(n.value||qt(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"!==t.type||"map-value-ind"!==this.type&&("newline"!==this.type||t.items[t.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=Gt(Vt(t));Jt(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e);else yield*this.pop(),yield*this.step()}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Gt(Vt(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Gt(Vt(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Wt(e,t={}){const{lineCounter:n,prettyErrors:r}=function(e){const t=!e||!1!==e.prettyErrors;return{lineCounter:e&&e.lineCounter||t&&new Mt||null,prettyErrors:t}}(t),i=new zt(null==n?void 0:n.addNewLine),o=new jt(t);let s=null;for(const t of o.compose(i.parse(e),!0,e.length))if(s){if("silent"!==s.options.logLevel){s.errors.push(new ct(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else s=t;return r&&n&&(s.errors.forEach(ut(e,n)),s.warnings.forEach(ut(e,n))),s}function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var en=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zt(r);if(i){var n=Zt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Xt(this,e)});function s(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=o.call(this,e,t,"IMPOSSIBLE",n)).name=e,r}return t=s,(n=[{key:"pretty",value:function(e){this.linePos=e.lineCounter.linePos(this.pos);var t=this.linePos,n=t.line,r=t.col;this.message+=" at line ".concat(n,", column ").concat(r)}}])&&Ht(t.prototype,n),s}(at);function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lineCounter=new Mt,this.src="",this.txt="",this.errors=[],this.warnings=[],this.yaml_ok=!1,this.contents=null,this.listener=null}var t,n;return t=e,(n=[{key:"errors",value:function(e){this.errors=this.errors.concat(e)}},{key:"warnings",value:function(e){this.warnings=this.warnings.concat(e)}},{key:"fileError",value:function(e){var t=new en("FILE_ERROR",0,"FileError : ".concat(e));return this.errors.push(t),t}},{key:"syntaxError",value:function(e,t){var n=new en("SYNTAX_ERROR",e.range?e.range[0]:0,"SyntaxError : ".concat(t));return this.errors.push(n),n}},{key:"syntaxWarning",value:function(e,t){var n=new en("SYNTAX_WARNING",e.range?e.range[0]:0,"SyntaxWarning : ".concat(t));return this.warnings.push(n),n}},{key:"grammarError",value:function(e){var t=new en("GRAMMAR_ERROR",0,"GrammarError : ".concat(e));this.errors.push(t)}},{key:"grammarWarning",value:function(e){var t=new en("GRAMMAR_WARNING",0,"GrammarWarning : ".concat(e));return this.warnings.push(t),t}},{key:"fails",value:function(){return this.errors.length>0}},{key:"success",value:function(){return 0==this.errors.length&&0==this.warnings.length}},{key:"result",value:function(){return this.contents}}])&&tn(t.prototype,n),e}();function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var on=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.type=n,this.current=r,this.start=r.range[0],this.end=r.range[1],this.childs=[]}var t,n;return t=e,(n=[{key:"getChild",value:function(e){return this.childs[e]}},{key:"getChildCount",value:function(){return this.childs.length}},{key:"getValue",value:function(){return this.value}},{key:"toString",value:function(){return this.value}}])&&rn(t.prototype,n),e}();function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=un(r);if(i){var n=un(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ln(this,e)});function s(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e,t,n)}return t=s,(n=[{key:"equals",value:function(e){if(e instanceof s)return this.value==e.value;this.ctx.syntaxError(this.current,"Error can not compare values '".concat(this.value,"' and '").concat(e.value,"'"))}}])&&an(t.prototype,n),s}(on);function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e,t){return!t||"object"!==pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dn(r);if(i){var n=dn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yn(this,e)});function s(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=o.call(this,e,"string",t),!s.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a string"));return n.value=t.value,n}return t=s,n=[{key:"checkCurrent",value:function(e){return f(e)&&"string"==typeof e.value}},{key:"parse",value:function(e,t){try{return new s(e,t)}catch(e){return null}}}],null&&hn(t.prototype,null),n&&hn(t,n),s}(fn);function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t){return!t||"object"!==_n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kn(r);if(i){var n=kn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wn(this,e)});function s(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=o.call(this,e,"binary",t),!s.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a base64 string"));return n.value=t.value,n}return t=s,n=[{key:"checkCurrent",value:function(e){return f(e)&&"string"==typeof e.value&&/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e.value)}},{key:"parse",value:function(e,t){try{return new s(e,t)}catch(e){return null}}}],null&&bn(t.prototype,null),n&&bn(t,n),s}(fn);function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jn(r);if(i){var n=jn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Nn(this,e)});function s(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=o.call(this,e,"int",t),!s.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not an integer"));return n.value=t.value,n}return t=s,n=[{key:"checkCurrent",value:function(e){return f(e)&&"number"==typeof e.value&&e.value==Math.floor(e.value)}},{key:"parse",value:function(e,t){try{return new s(e,t)}catch(e){return null}}}],null&&Sn(t.prototype,null),n&&Sn(t,n),s}(fn);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ln(r);if(i){var n=Ln(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $n(this,e)});function s(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=o.call(this,e,"float",t),!s.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a number"));return n.value=t.value,n}return t=s,n=[{key:"checkCurrent",value:function(e){return f(e)&&"number"==typeof e.value}},{key:"parse",value:function(e,t){try{return new s(e,t)}catch(e){return null}}}],null&&In(t.prototype,null),n&&In(t,n),s}(fn);function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e,t){return!t||"object"!==Bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qn(r);if(i){var n=qn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Mn(this,e)});function s(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e,"boolean",t)).value=null,!s.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t.value,"' is not a boolean"));return n.value=t.value,n}return t=s,n=[{key:"checkCurrent",value:function(e){return f(e)&&"boolean"==typeof e.value}},{key:"parse",value:function(e,t){try{return new s(e,t)}catch(e){return null}}}],null&&Rn(t.prototype,null),n&&Rn(t,n),s}(fn);function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e,t){return!t||"object"!==Dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jn(r);if(i){var n=Jn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Gn(this,e)});function s(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e,"null",t)).value=null,!s.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not the null value"));return n}return t=s,n=[{key:"checkCurrent",value:function(e){return f(e)&&(null==e.value||["Null","NULL","null","~"].includes(e.value))}},{key:"parse",value:function(e,t){try{return new s(e,t)}catch(e){return null}}}],null&&Un(t.prototype,null),n&&Un(t,n),s}(fn);function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(a,e);var t,n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xn(i);if(o){var n=Xn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qn(this,e)});function a(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=s.call(this,e,"timestamp",t),!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a timestamp in ISO9601 format"));return r.value=new Date(t.value),r}return t=a,r=[{key:"checkCurrent",value:function(e){var t=f(e)&&"string"==typeof e.value&&/\d{4}-\d{2}-\d{2}|\d{4}-\d{2}?-\d{2}?([Tt]|[ \t]+)\d{2}?:\d{2}:\d{2}(\.\d*)?(([ \t]*)Z|[-+]\d\d?(:\d{2})?)?/.test(e.value);if(1==t)try{new Date(e.value)}catch(e){t=!1}return t}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],(n=[{key:"equals",value:function(e){return e instanceof a?this.value.getTime()==e.value.getTime():this.ctx.syntaxError("Error : can not compare a timestamp with something else")}}])&&Yn(t.prototype,n),r&&Yn(t,r),a}(fn);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(r);if(i){var n=ir(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rr(this,e)});function s(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e,t,n)}return t=s,(n=[{key:"length",value:function(){return this.childs.length}},{key:"isEmpty",value:function(){return 0==this.length()}}])&&tr(t.prototype,n),s}(on);function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ur(r);if(i){var n=ur(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lr(this,e)});function s(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=o.call(this,e,"map",t),"object"!=sr(n)||n instanceof Array)throw e.syntaxError(t,"Erorr : MapNode must be initialized with a parsed map. This should not happen.");for(var i in r.value=n,n)r.childs.push(n[i]);return r}return t=s,n=[{key:"checkCurrent",value:function(e){return l(e)&&e.items.every((function(e){return e.key&&f(e.key)&&"string"==typeof e.key.value}))}}],null&&ar(t.prototype,null),n&&ar(t,n),s}(or);function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var yr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){"object"!=hr(t)&&e.grammarError("Error: oneof rule can not be parsed'");var r=t._oneOf;if(r instanceof Array){var i,o=[].concat(e.errors),s=[].concat(e.warnings),a=e.errors.length,c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(r);try{for(c.s();!(i=c.n()).done;){var l=ni(e,null,i.value,n);if(a==e.errors.length)return e.errors=o,e.warnings=s,l;a=e.errors.length}}catch(e){c.e(e)}finally{c.f()}return e.syntaxError(n,"Syntax Error : no valid alternative found during parsing"),null}e.grammarError("Error: _oneof rules expects a sequence of alternatives")}}],null&&mr(t.prototype,null),n&&mr(t,n),e}();function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gr="undefined"!=typeof Symbol;function _r(e){var t=dr(e);return"string"===t||"number"===t||"boolean"===t||!0===gr&&"symbol"===t||null==e||!0===gr&&e instanceof Symbol||e instanceof String||e instanceof Number||e instanceof Boolean}var br=["_merge"];function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(t,n){if("object"==Or(n)){if(n._oneOf){var r;!n._oneOf instanceof Array&&t.grammarError("Error : _oneof value have to be a list"),n._oneOf=n._oneOf.map((function(n){return e.parse(t,n)}));do{if((r=n._oneOf.findIndex((function(e){return e._oneOf})))>=0){var i=n._oneOf[r]._oneOf;(n={_oneOf:[].concat(n._oneOf)})._oneOf.splice(r,1),n._oneOf=n._oneOf.concat(i)}}while(r>=0);return n}if(n._merge){var o=function(){if(!(n._merge instanceof Array))return t.grammarError("Error : _merge value have to be a map"),{v:null};var r,i=n,o=(i._merge,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(i,br));n={_merge:n._merge},Object.keys(o).length&&n._merge.push(o),n._merge=n._merge.map((function(e){return _r(e)&&t.rules[e]?t.rules[e]:e})),n._merge=n._merge.map((function(n){return e.parse(t,n)}));do{if((r=n._merge.findIndex((function(e){return e._merge})))>=0){var s=n.one._merge;(n={_merge:[].concat(n._merge)})._merge.splice(r,1),n._merge=n._merge.concat(s)}}while(r>=0);var a={_oneOf:[]};do{if((r=(n={_merge:[].concat(n._merge)})._merge.findIndex((function(e){return e._oneOf})))>=0){var c=n._merge[r]._oneOf;(n={_merge:[].concat(n._merge)})._merge.splice(r,1),c.forEach((function(e){var t={_merge:[e].concat(n._merge)};a._oneOf.push(t)}))}}while(r>=0);if(a._oneOf.length>=1)return{v:e.parse(t,a)};n._merge.some((function(e){return e._merge||e._oneOf}))&&t.grammarError("Error : merge has not been processed successfully. This error should not occur.");var l={},u={},f=null,p=-1,h=-1;n._merge.forEach((function(e){if(e._map)for(var n in l=wr({},l),e._map)l.key&&t.grammarError("Error : can not merge two maps with some identical keys"),l[n]=e._map[n];if(e._mapFacultative)for(var r in u=wr({},u),e._mapFacultative)u.key&&t.grammarError("Error : can not merge two maps with some identical keys"),u[r]=e._mapFacultative[r];if(e._mapOf){if(null!=f)return t.grammarError("Error : only one '_mapOf' is allowed in a '_merge' clause"),null;f=e._mapOf}e._nb&&(p<0||p==e._nb?p=e._nb:t.grammarError("Contradictory sizing in merge clause")),e._min&&(h=Math.max(e._min,h)),e._max&&(nax=p>0?Math.min(e._max,-1):e._max)}));var m={};return p>=0&&(m._nb=p),h>=0&&(m._min=h),Object.keys(l).length>0&&(m._map=l),Object.keys(u).length>0&&(m._mapFacultative=u),null!=f&&(m._mapOf=f),{v:m}}();if("object"===Or(o))return o.v}if(n._map){var s={};for(var a in n._map)s[a]=e.parse(t,n._map[a]);n._map=s}if(n._mapFacultative){var c={};for(var l in n._mapFacultative)c[l]=e.parse(t,n._mapFacultative[l]);n._mapFacultative=c}if(n._mapOf){var u={};for(var f in n._mapOf){var p=e.parse(t,f),h=e.parse(t,n._mapOf[f]);u[p]=h}n._mapOf=u}n._list&&(n._list=n._list.map((function(n){return e.parse(t,n)}))),n._listFacultative&&(n._listFacultative=n._listFacultative.map((function(n){return e.parse(t,n)}))),n._listOf&&(n._listOf=e.parse(t,n._listOf))}return n}}],null&&Er(t.prototype,null),n&&Er(t,n),e}();function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"isPositiveInt",value:function(e){return"number"==typeof e&&e==Math.floor(e)&&e>0}},{key:"sizeChecker",value:function(t,n,r,i){if(e.isPositiveInt(r))if(l(i)||p(i))switch(n){case"eq":return i.items.length==r;case"min":return i.items.length>=r;case"max":return i.items.length<=r}else t.syntaxError(i,"Error : a map is expected");else t.grammarError("Error: the map checker '".concat(n,"' does not have a positive integer as value"));return!1}},{key:"sizeCheckers",value:function(t,n,r){return null==n._nb||e.sizeChecker(t,"eq",n._nb,r)?null==n._min||e.sizeChecker(t,"min",n._min,r)?!(null!=n._max&&!e.sizeChecker(t,"max",n._max,r)&&(t.syntaxError(r,"Error : map expected with more than ".concat(n._max," elements but ").concat(r.items.length," are provided")),1)):(t.syntaxError(r,"Error : map expected with more than ".concat(n._min," elements but ").concat(r.items.length," are provided")),!1):(t.syntaxError(r,"Error : map expected with ".concat(n._nb," elements but ").concat(r.items.length," are provided")),!1)}}],null&&xr(t.prototype,null),n&&xr(t,n),e}();function jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||Tr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){if(e){if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ar(e,t):void 0}}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){if(!fr.checkCurrent(n))return e.syntaxError(n,"Error : a map whose keys are strings is expected "),null;if(t._merge&&(t=Sr.parse(e,t))._oneOf)return yr.parse(e,t,n);var r=t._map,i=t._mapOf,o=t._mapFacultative;if(null!=r&&"object"==!Ir(r)||null!=i&&"object"!=Ir(i)||null!=o&&"object"!=Ir(o))return e.grammarError("Error : error in map value definition"),null;if(!Nr.sizeCheckers(e,t,n))return null;if(null!=r)for(var s in r){if("string"!=typeof s)return e.grammarError("Error : error in map definition"),null;if(!n.has(s))return e.syntaxError(n,"Error : key '".concat(s,"' not found in current value")),null}var a,c=null;if(i){var l=Object.entries(i);if(1==l.length){var u=jr(l,1),f=jr(u[0],2);a=f[0],c=f[1]}}var p,h={},m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Tr(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(n.items);try{for(m.s();!(p=m.n()).done;){var y=p.value,d=y.key.value,g=y.value,_=null;if(r&&r[d])_=ni(e,null,r[d],g);else if(o&&o[d])_=ni(e,null,o[d],g);else{if(!a||!c)return e.syntaxError(g,"Error : '".concat(d,"' is not a valid key (in rule : ").concat(JSON.stringify(t),")")),null;var b=ni(e,null,a,y.key);if(_=ni(e,null,c,g),b.value!=d)return e.syntaxError(d,"Error : '".concat(d,"' does not match expected '").concat(a,"' type")),null}if(null==_)return e.syntaxError(g,"Error : bad value '".concat(g,"'found for '").concat(d,"' (mapparser.parse)")),null;var v=new gn(e,y.key);if(_.key=v,null!=h[d])return e.syntaxError(g,"Error : more than one value provided in the map for the key '".concat(d,"'")),null;h[d]=_}}catch(e){m.e(e)}finally{m.f()}return new fr(e,n,h)}},{key:"parse_any",value:function(e,t){if(!fr.checkCurrent(t))return e.syntaxError(t,"Error : a map whose keys are strings is expected "),null;var n={};return t.items.forEach((function(t){var r=t.key.value,i=t.value,o=Vr.parse_any(e,i);if(null==o)return e.syntaxError(i,"Error : bad value '".concat(i,"' found for '").concat(r,"' (mapparser.parse_any)")),null;var s=new gn(e,t.key);o.key=s,null!=n[r]&&e.syntaxError(i,"Error : more than one value provided in the map for the key '".concat(r,"'")),n[r]=o})),new fr(e,t,n)}}],null&&Cr(t.prototype,null),n&&Cr(t,n),e}();function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e,t){return(Br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rr(e,t){return!t||"object"!==Lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Br(e,t)}(s,e);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fr(r);if(i){var n=Fr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Rr(this,e)});function s(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=o.call(this,e,"list",t),!n instanceof Array)throw e.syntaxError(t,"Erorr : ListNode must be initialized with an array. This should not happen.");return r.value=n,r.childs=r.value,r}return t=s,n=[{key:"checkCurrent",value:function(e){return p(e)}}],null&&Pr(t.prototype,null),n&&Pr(t,n),s}(or);function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){if(!Mr.checkCurrent(n))return e.syntaxError(n,"Error : a list is expected "),null;if(!Nr.sizeCheckers(e,t,n))return null;var r=t._list,i=t._listOf,o=t._listFacultative;if(null!=r&&!(r instanceof Array)||null!=o&&!(o instanceof Array))return e.grammarError("Error : error in list value definition"),null;var s=0,a=n.items.length,c=[];r&&r.forEach((function(t){if(!(s<a))return e.syntaxError(n,"Error : mandatory elements missing in the list"),null;var r=ni(e,null,t,n.items[s]);if(null==r)return e.syntaxError(n,"Error : can node parse an element of the list"),null;c.push(r),s+=1}));var l=[].concat(e.errors),u=[].concat(e.warnings);if(o&&o.forEach((function(t){if(s<a){var r=ni(e,null,t,n.items[s]);null!=r&&(c.push(r),s+=1)}})),null!=i)for(;s<a;s++){var f=ni(e,null,i,n.items[s]);if(null==f)return e.syntaxError(n,"Error : wrong type for an element in a list"),null;c.push(f)}return s<a?(e.syntaxError(n,"Error : too much elements in the list"),null):(e.errors=l,e.warnings=u,new Mr(e,n,c))}},{key:"parse_any",value:function(e,t){if(!Mr.checkCurrent(t))return e.syntaxError(t,"Error : a list whose keys are strings is expected "),null;var n=[];return t.items.forEach((function(t){var r=Vr.parse_any(e,t);if(null==r)return e.SyntaxError(value,"Error : bad value '".concat(value,"' found for '").concat(key,"' (listparser.parse_any)")),null;n.push(r)})),new Mr(e,t,n)}}],null&&qr(t.prototype,null),n&&qr(t,n),e}();function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(t,n,r){switch(n){case"string":return gn.parse(t,r);case"binary":return On.parse(t,r);case"timestamp":return Zn.parse(t,r);case"int":return Tn.parse(t,r);case"float":return Pn.parse(t,r);case"boolean":return Kn.parse(t,r);case"null":return zn.parse(t,r);case"any":return e.parse_any(t,r);default:return ri(t,n,r)}}},{key:"parse_any",value:function(e,t){if(f(t)){switch(Dr(t.value)){case"number":return Tn.checkCurrent(t)?Tn.parse(e,t):Pn.parse(e,t);case"boolean":return Kn.parse(e,t);case"string":return gn.parse(e,t);case"object":if(null==t.value)return zn.parse(e,t);e.syntaxError(t,"Error: value '".concat(t.value,"' is not a scalar value"));default:e.syntaxError(t,"Error: value '".concat(t.value,"' is not a scalar value"))}return null}return l(t)?$r.parse_any(e,t):p(t)?Kr.parse_any(e,t):null}}],null&&Ur(t.prototype,null),n&&Ur(t,n),e}();function Gr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Yr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){"object"==zr(t)&&t._in||e.grammarError("Error:  can not parse _in rule'");var r=t._in;if(!(r instanceof Array))return e.grammarError("Error: _in rules expects a sequence of alternatives"),null;var i,o=Gr(r);try{for(o.s();!(i=o.n()).done;)if(!_r(i.value))return e.grammarError("Error: _in rules expects each alternative to be a scalar"),null}catch(e){o.e(e)}finally{o.f()}if(!f(n))return e.syntaxError(n,"Syntax Error : scalar value expected by rule '_in'"),null;var s=Vr.parse_any(e,n);if(s){var a,c=[].concat(e.errors),l=[].concat(e.warnings),u=(e.errors.length,s.value),p=Gr(r);try{for(p.s();!(a=p.n()).done;){var h=a.value;if(h){var m=h==u?s:null;if(null!=m)return e.errors=c,e.warnings=l,m;e.errors.length}}}catch(e){p.e(e)}finally{p.f()}}return e.syntaxError(n,"Syntax Error : no valid alternative for '_in' rule found during parsing"),null}}],null&&Wr(t.prototype,null),n&&Wr(t,n),e}();function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){if(!gn.checkCurrent(n))return e.syntaxError(n,"Error: regular expressions match only strings, '".concat(n?n.value:"","' is not a string")),null;var r=t._regex;if(null==r)return e.grammarError("Error : regep rule must have a value for key '_regex'"),null;var i=null;try{i=new RegExp(r)}catch(e){}return null==i?(e.grammarError("Error: value '".concat(i,"' is not a valid regular expression")),null):i.test(n.value)?new gn(e,n):(e.syntaxError(n,"Error: value '".concat(n.value,"' does not match the regular expression '").concat(i,"'")),null)}}],null&&Hr(t.prototype,null),n&&Hr(t,n),e}();function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ei=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(t,n,r,i){if(e.scalartypes.includes(n)||e.keywords.includes(n))return t.syntaxError(i,"'".concat(n,"' is not allowed as rule_name in Lidy Grammar (reserved keyword)")),null;var o="enter_"+n;t.listener&&t.listener[o]&&t.listener[o](i);var s=ni(t,null,r,i),a="exit_"+n;return s&&t.listener&&t.listener[a]&&t.listener[a](s),s}}],null&&Xr(t.prototype,null),n&&Xr(t,n),e}();function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t,n,r){if(t)return ei.parse(e,t,n,r);if(_r(n))return Vr.parse(e,n,r);if("object"==ti(n)){if(n._map||n._mapOf||n._mapFacultative||n._merge)return $r.parse(e,n,r);if(n._list||n._listOf||n._listFacultative)return Kr.parse(e,n,r);if(n._oneOf)return yr.parse(e,n,r);if(n._regex)return Qr.parse(e,n,r);if(n._in)return Yr.parse(e,n,r)}return e.grammarError("Error : grammar error : no valid keyword found"),null}function ri(e,t,n){var r=e.rules[t];return void 0!==r?ni(e,t,r,n):(e.grammarError("no rule named ".concat(t," found.")),null)}Zr(ei,"scalartypes",["string","int","float","null","boolean","binary","timestamp"]),Zr(ei,"keywords",["_map","_mapOf","_mapFacultative","_list","_listOf","_listFacultative","_oneOf","_regex","_nb","_min","_max","_in"]);console.log("on commence");var ii,oi=((ii={src_data:"tosca_definitions_version: tosca_1.2",keyword:"service_template"}).rules={unbounded:{_in:["unbounded"]},namespace:"string",description:"string",range:{_list:["scalarOrUnbounded","scalarOrUnbounded"]},metadata:{_mapFacultative:{template_version:"version",template_author:"string",template_name:"string"},_mapOf:{string:"string"}},version:{_regex:"^[0-d]+(\\.[0-d]+(\\.[0-9]+(.[a-zA-Z0-9_]+(\\-[0-9]+)?)?)?)?$"},url:{_regex:"^(https?:\\\\/\\\\/)?((([a-z\\\\d]([a-z\\\\d_-]*[a-z\\\\d])*)\\\\.?)+[a-z\\\\d_-]{2,}|((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*(\\\\?[;&a-z\\\\d%_.~+=-]*)?(\\\\#[-a-z\\\\d_]*)?$"},size:"scalar_unit.size","scalar_unit.size":{_regex:"((?<sign>[+-]) *)?(?<value>[0-9]+(\\.[0-9]+)?) *(?<unit>B|kB|KiB|MB|MiB|GB|GiB|TB|TiB)$"},time:"scalar_unit.time","scalar_unit.time":{_regex:"((?<sign>[+-]) *)?(?<value>[0-9]+(\\.[0-9]+)?) *(?<unit>d|h|m|s|ms|us|ns)$"},frequency:"scalar_unit.frequency","scalar_unit.frequency":{_regex:"((?<sign>[+-]) *)?(?<value>[0-9]+(\\.[0-9]+)?) *(?<unit>Hz|kHz|MHz|GHz)$"},bitrate:"scalar_unit.bitrate","scalar_unit.bitrate":{_regex:"((?<sign>[+-]) *)?(?<value>[0-9]+(\\.[0-9]+)?) *(?<unit>bps|Kbps|Kibps|Mbps|Mibps|Gbps|Gibps|Tbps|Tibps|Bps|KBps|KiBps|MBps|MiBps|GBps|GiBps|TBps|TiBps)$"},string_value_expresion:{_oneOf:["string","value_expression"]},scalar:{_oneOf:["int","float","frequency","bitrate","time","size","timestamp"]},scalarOrUnbounded:{_oneOf:["scalar","unbounded"]},value:{_oneOf:["boolean","int","float","version","range","frequency","bitrate","time","size","timestamp","string",{_listOf:"any"},{_mapOf:{any:"any"}},"nullType"]},value_expression:{_max:1,_mapFacultative:{concat:"value_expression.concat",get_input:"value_expression.get_input",get_nodes_of_type:"value_expression.get_nodes_of_type",token:"value_expression.token",join:"value_expression.join",get_property:"value_expression.get_property",get_attribute:"value_expression.get_attribute",get_operation_output:"value_expression.get_operation_output",get_artifact:"value_expression.get_artifact"}},"value_expression.concat":{_list:["string_value_expression"]},"value_expression.get_input":{_oneOf:["string",{_listOf:"string",_min:1}]},"value_expression.get_nodes_of_type":"string","value_expression.token":{_list:["string_value_expression","string","int"]},"value_expression.join":{_oneOf:[{_list:[{_listOf:"string_value_expression"}]},{_list:[{_listOf:"string_value_expression"},"string"]}]},"value_expression.get_property":{_list:["string","string"],_listOf:{_oneOf:["int","string"]},_min:3},"value_expression.get_attribute":{_list:["string","string"],_listOf:{_oneOf:["int","string"]},_min:3},"value_expression.get_operation_output":{_list:["string","string","string","string"]},"value_expression.get_artifact":{_oneOf:[{_list:["string","string","boolean"]},{_list:["string","string","string","boolean"]}]},import:{_oneOf:["string",{_nb:1,_mapOf:{string:"string"}},{_nb:1,_mapOf:{string:"import.target"}}]},"import.target":{_map:{file:"string"},_mapFacultative:{repository:"string",namespace_prefix:"string",namespace_uri:"string"}},imports:{_listOf:"import",_min:1},constraint:{_max:1,_mapFacultative:{equal:"value",greater_than:"value",greater_or_equal:"value",less_than:"value",less_or_equal:"value",in_range:"range",valid_values:{_listOf:"any"},length:"int",min_length:"int",max_length:"int",pattern:"string",schema:"string"}},constraints:{_listOf:"constraint",_min:1},entry_schema:{_oneOf:["string",{_map:{type:"string"},_mapFacultative:{description:"description",constraints:"constraints",entry_schema:"entry_schema"}}]},parameter_assignment:{_oneOf:["value_expression","value",{_mapFacultative:{description:"description",value:{_oneOf:["value_expression","value"]}}}]},property:{_map:{type:"string"},_mapFacultative:{description:"description",constraints:"constraints",required:"boolean",default:"value",status:{_in:["supported","unsupported","experimental","deprecated","optional"]},metadata:"metadata",entry_schema:"entry_schema"}},properties:{_mapOf:{string:"property"}},property_assignments:{_mapOf:{string:"parameter_assignment"}},attribute:{_map:{type:"string"},_mapFacultative:{description:"description",default:"value",status:{_in:["supported","unsupported","experimental","deprecated","optional"]},entry_schema:"entry_schema"}},attributes:{_mapOf:{string:"attribute"}},attribute_assignments:{_mapOf:{string:"parameter_assignment"}},input_parameter:{_map:{type:"string"},_mapFacultative:{description:"description",constraints:"constraints",required:"boolean",default:"value",status:{_in:["supported","unsupported","experimental","deprecated","optional"]},entry_schema:"entry_schema",value:{_oneOf:["value","value_expression"]}}},input_parameters:{_mapOf:{string:"input_parameter"}},input_assignments:{_mapOf:{string:"parameter_assignment"}},output_parameter:{_mapFacultative:{type:"string",description:"description",constraints:"constraints",required:"boolean",default:"value",status:{_in:["supported","unsupported","experimental","deprecated","optional"]},entry_schema:"entry_schema",value:{_oneOf:["value","value_expression"]}}},output_parameters:{_mapOf:{string:"output_parameter"}},repository:{_oneOf:["string",{_map:{url:"string"},_mapFacultative:{description:"description",credential:{_map:{token:"string"},_mapFacultative:{protocol:"string",token_type:"string",user:"string"}}}}]},repositories:{_mapOf:{string:"output_parameter"}},artifact_def:{_oneOf:["string",{_map:{type:"string",file:"string"},_mapFacultative:{description:"description",repository:"string",deploy_path:"string",version:"version",checksum:"string",checksum_algorithm:"string",properties:"property_assignments"}}]},artifact_defs:{_mapOf:{string:"artifact_def"}},type_common_keys:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description"}},artifact_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",file_ext:{_listOf:"string",_min:1},mime_type:"string",properties:"properties"}},artifact_types:{_mapOf:{string:"artifact_type"}},data_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",properties:"properties",constraints:"constraints",key_schema:"entry_schema",entry_schema:"entry_schema"}},data_types:{_mapOf:{string:"data_type"}},implementation:{_oneOf:["string",{_mapFacultative:{primary:{_oneOf:["string","artifact_def"]},dependencies:{_listOf:{_oneOf:["string","artifact_def"]},_min:1}}}]},operation_def:{_oneOf:["string",{_mapFacultative:{description:"description",inputs:"properties",implementation:"implementation"}}]},operation_def_template:{_oneOf:["string",{_mapFacultative:{description:"description",inputs:"input_assignments",implementation:"implementation"}}]},interface_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",inputs:"properties"},_mapOf:{string:"operation_def"}},interface_types:{_mapOf:{string:"interface_type"}},interface_def:{_mapFacultative:{type:"string",inputs:"properties"},_mapOf:{string:"operation_def"}},interface_defs:{_mapOf:{string:"interface_def"}},interface_assignment:{_mapFacultative:{inputs:"property_assignments"},_mapOf:{string:"operation_def_template"}},interface_assignments:{_mapOf:{string:"interface_assignment"}},capability_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",properties:"properties",attributes:"attributes",valid_source_types:{_listOf:"string",_min:1}}},capability_types:{_mapOf:{string:"capability_type"}},capability_def:{_oneOf:[{_map:{type:"string"},_mapFacultative:{description:"description",properties:"properties",attributes:"attributes",valid_source_types:{_listOf:"string"},occurrences:"range"}},"string"]},capability_defs:{_mapOf:{string:"capability_def"}},capability_assignment:{_mapFacultative:{properties:"property_assignments",attributes:"attribute_assignments",occurences:"range"}},capability_assignments:{_mapOf:{string:"capability_assignment"}},property_filter:{_nb:1,_mapOf:{string:{_oneOf:["constraint","value",{_listOf:{_oneOf:["constraint","value"]},_min:1}]}}},properties_filter:{_listOf:"property_filter"},capability_filter:{_nb:1,_mapOf:{string:{_mapFacultative:{properties:"properties_filter"}}}},capabilities_filter:{_listOf:"capability_filter"},node_filter:{_mapFacultative:{properties:"properties_filter",capabilities:"capabilities_filter"}},relationship_def:{_oneOf:["string",{_mapFacultative:{type:"string",interfaces:"interface_defs"}}]},requirement_def:{_nb:1,_mapOf:{string:{_oneOf:["string",{_map:{capability:"string"},_mapFacultative:{description:"description",node:"string",occurrences:"range",relationship:"relationship_def"}}]}}},requirement_defs:{_listOf:"requirement_def"},relationship_assignment:{_oneOf:["string",{_mapFacultative:{type:"string",properties:"property_assignments",interfaces:"interface_defs_template"}}]},requirement_assignment:{_nb:1,_mapOf:{string:{_oneOf:["string",{_mapFacultative:{node:"string",relationship:{_oneOf:["string","relationship_assignment"]},capability:"string",occurrences:"range",node_filter:"node_filter"}}]}}},requirement_assignments:{_listOf:"requirement_assignment"},workflow_condition_operator:{_nb:1,_mapFacultative:{or:"workflow_condition_clause",and:"workflow_condition_clause",not:"workflow_condition_clause",assert:"workflow_condition_clause"},_mapOf:{string:"constraints"}},workflow_condition_clause:{_listOf:"workflow_condition_operator",_min:1},workflow_preconditions:{_listOf:"workflow_precondition",_min:1},workflow_precondition:{_mapFacultative:{target:"string",target_relationship:"string",condition:"workflow_condition_clause"}},workflow_activities:{_listOf:"workflow_activity",_min:1},workflow_activity:{_nb:1,_mapFacultative:{delegate:"workflow_activity.inline",set_state:"workflow_activity.state",call_operation:"workflow_activity.call_operation",inline:"workflow_activity.inline"}},"workflow_activity.inline":{_oneOf:["string",{_map:{workflow:"string"},_mapFacultative:{inputs:"input_assignments"}}]},"workflow_activity.call_operation":{_oneOf:["string",{_map:{operation:"string"},_mapFacultative:{inputs:"input_assignments"}}]},"workflow_activity.state":{_in:["initial","creating","created","configuring","configured","starting","started","stopping","stopped","deleting","deleted","error"]},declarative_workflow_steps:{_mapOf:{string:"declarative_workflow_step"}},imperative_workflow_steps:{_mapOf:{string:"imperative_workflow_step"}},declarative_workflow_step:{_map:{activities:"workflow_activities"},_mapFacultative:{filter:"workflow_condition_clause",operation_host:"string",on_succes:{_oneOf:["string",{_listOf:"string",_min:1}]},on_failure:{_oneOf:["string",{_listOf:"string",_min:1}]}}},imperative_workflow_step:{_map:{target:"string",activities:"workflow_activities"},_mapFacultative:{target_relationship:"string",filter:"workflow_condition_clause",operation_host:"string",on_succes:{_oneOf:["string",{_listOf:"string",_min:1}]},on_failure:{_oneOf:["string",{_listOf:"string",_min:1}]}}},workflow_source_weaving_list:{_listOf:"workflow_source_weaving",_min:1},workflow_source_weaving:{_mapFacultative:{after:"string",before:"string",wait_target:"string",after_target:"string",activity:"string"}},workflow_target_weaving_list:{_listOf:"workflow_target_weaving",_min:1},workflow_target_weaving:{_mapFacultative:{after:"string",before:"string",wait_source:"string",after_source:"string",activity:"string"}},declarative_workflow_node_defs:{_mapOf:{string:"declarative_workflow_node_def"}},declarative_workflow_node_def:{_mapFacultative:{description:"description",metadata:"metadata",inputs:"properties",preconditions:"workflow_preconditions",steps:"declarative_workflow_steps"}},declarative_workflow_rel_defs:{_mapOf:{string:"declarative_workflow_rel_def"}},declarative_workflow_rel_def:{_mapFacultative:{description:"description",metadata:"metadata",inputs:"properties",preconditions:"workflow_preconditions",source_weaving:"workflow_source_weaving_list",target_weaving:"workflow_target_weaving_list"}},imperative_workflow_defs:{_mapOf:{string:"imperative_workflow_def"}},imperative_workflow_def:{_mapFacultative:{description:"description",metadata:"metadata",inputs:"properties",preconditions:"workflow_preconditions",steps:"imperative_workflow_steps"}},node_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",properties:"properties",attributes:"attributes",capabilities:"capability_defs",requirements:"requirement_defs",interfaces:"interface_defs",workflows:"declarative_workflow_node_defs",artifacts:"artifact_defs"}},node_types:{_mapOf:{string:"node_type"}},node_template:{_oneOf:[{_map:{type:"string"},_mapFacultative:{metadata:"metadata",description:"description",directives:{_list:["string"]},properties:"property_assignments",attributes:"attribute_assignments",capabilities:"capability_assignments",requirements:"requirement_assignments",interfaces:"interface_assignments",artifacts:"artifact_defs",node_filter:"node_filter"}},{_map:{copy:"string"},_mapFacultative:{metadata:"metadata",description:"description",directives:{_list:["string"]},properties:"property_assignments",attributes:"attribute_assignments",capabilities:"capability_assignments",requirements:"requirement_assignments",interfaces:"interface_assignments",artifacts:"artifact_defs",node_filter:"node_filter"}}]},node_templates:{_mapOf:{string:"node_template"}},relationship_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",properties:"properties",attributes:"attributes",interfaces:"interface_defs",valid_target_types:{_listOf:"string",_min:1},workflows:"declarative_workflow_rel_defs"}},relationship_types:{_mapOf:{string:"relationship_type"}},relationship_template:{_oneOf:[{_map:{type:"string"},_mapFacultative:{description:"description",metadata:"metadata",properties:"properties",attributes:"attributes",interfaces:"interface_assignments"}},{_map:{copy:"string"},_mapFacultative:{description:"description",metadata:"metadata",properties:"properties",attributes:"attributes",interfaces:"interface_assignments"}}]},relationship_templates:{_mapOf:{string:"relationship_template"}},group_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",properties:"properties",capabilities:"capability_defs",requirements:"requirement_defs",interfaces:"interface_defs",members:{_listOf:"string",_min:1}}},group_types:{_mapOf:{string:"group_type"}},group_def:{_map:{type:"string"},_mapFacultative:{description:"description",properties:"property_assignments",members:{_listOf:"string",_min:1},interfaces:"interface_assignments"}},group_defs:{_mapOf:{string:"group_def"}},event:{_oneOf:["string",{_mapFacultative:{type:"string"}}]},target_filter:{_mapFacultative:{node:"string",requirement:"string",capability:"string"}},trigger_def:{_nb:1,_mapOf:{string:"trigger_def.value"}},"trigger_def.value":{_mapFacultative:{description:"description",event:"event",schedule:"value",target_filter:"target_filter",condition:{_oneOf:["constraint",{_mapFacultative:{constraint:"constraint"}}]},period:"string",evaluations:"int",method:"string",action:{_oneOf:["string","operation_def"]}}},trigger_defs:{_listOf:"trigger_def",_min:1},policy_type:{_mapFacultative:{derived_from:"string",version:"version",metadata:"metadata",description:"description",properties:"properties",targets:{_listOf:"string",_min:1},triggers:"trigger_defs"}},policy_types:{_mapOf:{string:"policy_type"}},policy_defs:{_listOf:"policy_def",_min:1},policy_def:{_nb:1,_mapOf:{string:{_mapFacultative:{type:"string",description:"description",properties:"property_assignments",targets:{_listOf:"string",_min:1},triggers:"trigger_defs"}}}},properties_mapping:{_mapOf:{string:"property_mapping"}},property_mapping:{_oneOf:["value","value_expression",{_listOf:"string",_min:1,_max:3},{_nb:1,_mapFacultative:{mapping:{_oneOf:["string",{_max:3,_listOf:"string"}]},value:{_oneOf:["value","value_expression"]}}}]},attributes_mapping:{_mapOf:{string:"attribute_mapping"}},attribute_mapping:{_oneOf:["value","value_expression",{_listOf:"string",_min:1,_max:3},{_nb:1,_mapFacultative:{mapping:{_oneOf:["string",{_max:3,_listOf:"string"}]},value:{_oneOf:["value","value_expression"]}}}]},capabilities_mapping:{_mapOf:{string:"capability_mapping"}},capability_mapping:{_oneOf:[{_listOf:"string",_min:1,_max:2},{_mapFacultative:{mapping:{_oneOf:["string",{_listOf:"string",_nb:2}]},properties:"property_assignments",attributes:"attribute_assignments"}}]},requirements_mapping:{_mapOf:{string:"requirement_mapping"}},requirement_mapping:{_oneOf:[{_listOf:"string",_min:1,_max:2},{_mapFacultative:{mapping:{_oneOf:["string",{_listOf:"string",_min:1,_max:3}]},properties:"property_assignments",attributes:"attribute_assignments"}}]},interfaces_mapping:{_mapOf:{string:"interface_mapping"}},interface_mapping:{_nb:1,_mapOf:{string:"string"}},substitution_mappings:{_map:{node_type:"string"},_mapFacultative:{substitution_filter:"node_filter",properties:"properties_mapping",capabilities:"capabilities_mapping",requirements:"requirements_mapping",attributes:"attributes_mapping",interfaces:"interfaces_mapping"}},topology_template:{_mapFacultative:{description:"description",inputs:"input_parameters",outputs:"output_parameters",node_templates:"node_templates",relationship_templates:"relationship_templates",groups:"group_defs",policies:"policy_defs",substitution_mappings:"substitution_mappings",workflows:"imperative_workflow_defs"}},service_template:{_map:{tosca_definitions_version:"string"},_mapFacultative:{description:"description",namespace:"namespace",metadata:"metadata",repositories:"repositories",imports:"imports",artifact_types:"artifact_types",data_types:"data_types",capability_types:"capability_types",interface_types:"interface_types",relationship_types:"relationship_types",node_types:"node_types",group_types:"group_types",policy_types:"policy_types",topology_template:"topology_template"}}},function(e){e.keyword||(e.keyword="main");var t=new nn;return e.rules?t.rules=e.rules:function(e,t,n){try{e.rules=function(e,t,n){let r;const i=Wt(e,n);if(!i)return null;if(i.warnings.forEach((e=>Y(i.options.logLevel,e))),i.errors.length>0){if("silent"!==i.options.logLevel)throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}(t)}catch(t){throw e.errors.push(t),e.grammarError("ERROR : can not parse dsl ")}if("object"==!ti(e.rules))throw e.grammarError("ERROR : can not parse dsl ");if(!e.rules[n])throw Error("ERROR : no rule labeled '"+n+"' in the grammar")}(t,e.dsl_data,e.keyword),function(e,t){e.lineCounter=new Mt;var n=Wt(t,{lineCounter:e.lineCounter});n||e.fileError("can not parse the provided source code."),e.src=n.contents,e.txt=t,e.errors=n.errors,e.warnings=n.warnings,e.yaml_ok=0==e.errors.length&&0==e.warnings.length}(t,e.src_data),function(e,t,n){var r=ri(e,t,n);return e.errors.filter((function(e){return e instanceof en})).forEach((function(t){return t.pretty(e)})),e.warnings.filter((function(e){return e instanceof en})).forEach((function(t){return t.pretty(e)})),e.contents=r,e}(t,e.keyword,t.src)}(ii));console.log("resultat : "+oi+"."),console.log(" res : "+oi+" !"),console.log("on a fini")})();