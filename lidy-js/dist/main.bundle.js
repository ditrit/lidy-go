(()=>{"use strict";const e=Symbol.for("yaml.alias"),t=Symbol.for("yaml.document"),n=Symbol.for("yaml.map"),r=Symbol.for("yaml.pair"),o=Symbol.for("yaml.scalar"),i=Symbol.for("yaml.seq"),a=Symbol.for("yaml.node.type"),u=t=>!!t&&"object"==typeof t&&t[a]===e,l=e=>!!e&&"object"==typeof e&&e[a]===t,c=e=>!!e&&"object"==typeof e&&e[a]===n,s=e=>!!e&&"object"==typeof e&&e[a]===r,f=e=>!!e&&"object"==typeof e&&e[a]===o,y=e=>!!e&&"object"==typeof e&&e[a]===i;function p(e){if(e&&"object"==typeof e)switch(e[a]){case n:case i:return!0}return!1}function m(t){if(t&&"object"==typeof t)switch(t[a]){case e:case n:case o:case i:return!0}return!1}class h{constructor(e){Object.defineProperty(this,a,{value:e})}}const b=Symbol("break visit"),v=Symbol("skip children"),d=Symbol("remove node");function g(e,t){"object"==typeof t&&(t.Collection||t.Node||t.Value)&&(t=Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t)),l(e)?w(null,e.contents,t,Object.freeze([e]))===d&&(e.contents=null):w(null,e,t,Object.freeze([]))}function w(e,t,n,r){let o;if("function"==typeof n?o=n(e,t,r):c(t)?n.Map&&(o=n.Map(e,t,r)):y(t)?n.Seq&&(o=n.Seq(e,t,r)):s(t)?n.Pair&&(o=n.Pair(e,t,r)):f(t)?n.Scalar&&(o=n.Scalar(e,t,r)):u(t)&&n.Alias&&(o=n.Alias(e,t,r)),m(o)||s(o)){const t=r[r.length-1];if(p(t))t.items[e]=o;else if(s(t))"key"===e?t.key=o:t.value=o;else{if(!l(t)){const e=u(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}t.contents=o}return w(e,o,n,r)}if("symbol"!=typeof o)if(p(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const o=w(e,t.items[e],n,r);if("number"==typeof o)e=o-1;else{if(o===b)return b;o===d&&(t.items.splice(e,1),e-=1)}}}else if(s(t)){r=Object.freeze(r.concat(t));const e=w("key",t.key,n,r);if(e===b)return b;e===d&&(t.key=null);const o=w("value",t.value,n,r);if(o===b)return b;o===d&&(t.value=null)}return o}g.BREAK=b,g.SKIP=v,g.REMOVE=d;const O={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class _{constructor(e,t){this.marker=null,this.yaml=Object.assign({},_.defaultYaml,e),this.tags=Object.assign({},_.defaultTags,t)}atDocument(){const e=new _(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:_.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},_.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:_.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},_.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,!0),!1)}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/);r||t(`The ${e} tag has no suffix`);const o=this.tags[n];return o?o+decodeURIComponent(r):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>O[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&m(e.contents)){const t={};g(e.contents,((e,n)=>{m(n)&&n.tag&&(t[n.tag]=!0)})),r=Object.keys(t)}else r=[];for(const[o,i]of n)"!!"===o&&"tag:yaml.org,2002:"===i||e&&!r.some((e=>e.startsWith(i)))||t.push(`%TAG ${o} ${i}`);return t.join("\n")}}function S(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}_.defaultYaml={explicit:!1,version:"1.2"},_.defaultTags={"!!":"tag:yaml.org,2002:"};class E extends h{constructor(t){super(e),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return g(e,{Node:(e,n)=>{if(n===this)return g.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:o}=t,i=this.resolve(r);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const a=n.get(i);if(!a||void 0===a.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(o>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=k(r,i,n)),a.count*a.aliasCount>o))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return a.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(S(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function k(e,t,n){if(u(t)){const r=t.resolve(e),o=n&&r&&n.get(r);return o?o.count*o.aliasCount:0}if(p(t)){let r=0;for(const o of t.items){const t=k(e,o,n);t>r&&(r=t)}return r}if(s(t)){const r=k(e,t.key,n),o=k(e,t.value,n);return Math.max(r,o)}return 1}function j(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>j(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||!f(r=e)&&!p(r)||!r.anchor)return e.toJSON(t,n);const o={aliasCount:0,count:1,res:void 0};n.anchors.set(e,o),n.onCreate=e=>{o.res=e,delete n.onCreate};const i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}var r;return"bigint"!=typeof e||n&&n.keep?e:Number(e)}const x=e=>!e||"function"!=typeof e&&"object"!=typeof e;class $ extends h{constructor(e){super(o),this.value=e}toJSON(e,t){return t&&t.keep?this.value:j(this.value,e,t)}toString(){return String(this.value)}}function P(e,t,r){var o,a;if(m(e))return e;if(s(e)){const t=null===(a=(o=r.schema[n]).createNode)||void 0===a?void 0:a.call(o,r.schema,null,r);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"function"==typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{onAnchor:u,onTagObj:l,schema:c,sourceObjects:f}=r;let y;if(e&&"object"==typeof e){if(y=f.get(e),y)return y.anchor||(y.anchor=u(e)),new E(y.anchor);y={anchor:null,node:null},f.set(e,y)}t&&t.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let p=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),r=e.find((e=>!e.format))||e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify&&t.identify(e)&&!t.format))}(e,t,c.tags);if(!p){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e)return new $(e);p=e instanceof Map?c[n]:Symbol.iterator in Object(e)?c[i]:c[n]}l&&(l(p),delete r.onTagObj);const h=(null==p?void 0:p.createNode)?p.createNode(r.schema,e,r):new $(e);return t&&(h.tag=t),y&&(y.node=h),h}function C(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else{const e={};Object.defineProperty(e,"symbol"==typeof n?n:String(n),{value:r,writable:!0,enumerable:!0,configurable:!0}),r=e}}return P(r,void 0,{onAnchor(){throw new Error("Repeated objects are not supported here")},schema:e,sourceObjects:new Map})}$.BLOCK_FOLDED="BLOCK_FOLDED",$.BLOCK_LITERAL="BLOCK_LITERAL",$.PLAIN="PLAIN",$.QUOTE_DOUBLE="QUOTE_DOUBLE",$.QUOTE_SINGLE="QUOTE_SINGLE";class A extends h{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}addIn(e,t){if((e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done)(e))this.add(t);else{const[n,...r]=e,o=this.get(n,!0);if(p(o))o.addIn(r,t);else{if(void 0!==o||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,C(this.schema,r,t))}}}deleteIn([e,...t]){if(0===t.length)return this.delete(e);const n=this.get(e,!0);if(p(n))return n.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}getIn([e,...t],n){const r=this.get(e,!0);return 0===t.length?!n&&f(r)?r.value:r:p(r)?r.getIn(t,n):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!s(t))return!1;const n=t.value;return null==n||e&&f(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn([e,...t]){if(0===t.length)return this.has(e);const n=this.get(e,!0);return!!p(n)&&n.hasIn(t)}setIn([e,...t],n){if(0===t.length)this.set(e,n);else{const r=this.get(e,!0);if(p(r))r.setIn(t,n);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`);this.set(e,C(this.schema,t,n))}}}}function R(e,t,n){return n?n.includes("\n")?`${e}\n`+n.replace(/^/gm,`${t||""}#`):e.endsWith(" ")?`${e}#${n}`:`${e} #${n}`:e}A.maxFlowStringSingleLineLength=60;const N="flow",T="block",I="quoted";function B(e,t,n="flow",{indentAtStart:r,lineWidth:o=80,minContentWidth:i=20,onFold:a,onOverflow:u}={}){if(!o||o<0)return e;const l=Math.max(1+i,1+o-t.length);if(e.length<=l)return e;const c=[],s={};let f,y,p=o-t.length;"number"==typeof r&&(r>o-Math.max(2,i)?c.push(0):p=o-r);let m,h=!1,b=-1,v=-1,d=-1;for(n===T&&(b=L(e,b),-1!==b&&(p=b+l));m=e[b+=1];){if(n===I&&"\\"===m){switch(v=b,e[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}d=b}if("\n"===m)n===T&&(b=L(e,b)),p=b+l,f=void 0;else{if(" "===m&&y&&" "!==y&&"\n"!==y&&"\t"!==y){const t=e[b+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(f=b)}if(b>=p)if(f)c.push(f),p=f+l,f=void 0;else if(n===I){for(;" "===y||"\t"===y;)y=m,m=e[b+=1],h=!0;const t=b>d+1?b-2:v-1;if(s[t])return e;c.push(t),s[t]=!0,p=t+l,f=void 0}else h=!0}y=m}if(h&&u&&u(),0===c.length)return e;a&&a();let g=e.slice(0,c[0]);for(let r=0;r<c.length;++r){const o=c[r],i=c[r+1]||e.length;0===o?g=`\n${t}${e.slice(0,i)}`:(n===I&&s[o]&&(g+=`${e[o]}\\`),g+=`\n${t}${e.slice(o+1,i)}`)}return g}function L(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const M=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),F=e=>/^(%|---|\.\.\.)/m.test(e);function K(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,o=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(F(e)?"  ":"");let a="",u=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(a+=n.slice(u,e)+"\\ ",e+=1,u=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{a+=n.slice(u,e);const t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===t.substr(0,2)?a+="\\x"+t.substr(2):a+=n.substr(e,6)}e+=5,u=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<o)e+=1;else{for(a+=n.slice(u,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)a+="\n",e+=2;a+=i," "===n[e+2]&&(a+="\\"),e+=1,u=e+1}break;default:e+=1}return a=u?a+n.slice(u):n,r?a:B(a,i,I,M(t))}function D(e,t){if(t.implicitKey){if(/\n/.test(e))return K(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return K(e,t);const n=t.indent||(F(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:B(r,n,N,M(t))}function J({comment:e,type:t,value:n},r,o,i){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return K(n,r);const a=r.indent||(r.forceBlockIndent||F(n)?"  ":""),u=t!==$.BLOCK_FOLDED&&(t===$.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,o=e.length;if(o<=r)return!1;for(let t=0,n=0;t<o;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,o-n<=r)return!1}return!0}(n,r.options.lineWidth,a.length));if(!n)return u?"|\n":">\n";let l,c;for(c=n.length;c>0;--c){const e=n[c-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let s=n.substring(c);const f=s.indexOf("\n");-1===f?l="-":n===s||f!==s.length-1?(l="+",i&&i()):l="",s&&(n=n.slice(0,-s.length),"\n"===s[s.length-1]&&(s=s.slice(0,-1)),s=s.replace(/\n+(?!\n|$)/g,`$&${a}`));let y,p=!1,m=-1;for(y=0;y<n.length;++y){const e=n[y];if(" "===e)p=!0;else{if("\n"!==e)break;m=y}}let h=n.substring(0,m<y?m+1:y);h&&(n=n.substring(h.length),h=h.replace(/\n+/g,`$&${a}`));let b=(u?"|":">")+(p?a?"2":"1":"")+l;return e&&(b+=" #"+e.replace(/ ?[\r\n]+/g," "),o&&o()),u?`${b}\n${a}${h}${n=n.replace(/\n+/g,`$&${a}`)}${s}`:`${b}\n${a}${B(`${h}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`)}${s}`,a,T,M(r))}`}function U(e,t,n,r){if(s(e))return e.toString(t,n,r);if(u(e))return e.toString(t);let o;const i=m(e)?e:t.doc.createNode(e,{onTagObj:e=>o=e});o||(o=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))||n[0]}let n,r;if(f(t)){r=t.value;const o=e.filter((e=>e.identify&&e.identify(r)));n=o.find((e=>e.format===t.format))||o.find((e=>!e.format))}else r=t,n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass));if(!n){const e=r&&r.constructor?r.constructor.name:typeof r;throw new Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,i));const a=function(e,t,{anchors:n,doc:r}){const o=[],i=(f(e)||p(e))&&e.anchor;return i&&S(i)&&(n.add(i),o.push(`&${i}`)),e.tag?o.push(r.directives.tagString(e.tag)):t.default||o.push(r.directives.tagString(t.tag)),o.join(" ")}(i,o,t);a.length>0&&(t.indentAtStart=(t.indentAtStart||0)+a.length+1);const l="function"==typeof o.stringify?o.stringify(i,t,n,r):f(i)?function(e,t,n,r){const{implicitKey:o,inFlow:i}=t,a="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:u}=e;u!==$.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(u=$.QUOTE_DOUBLE);const l=e=>{switch(e){case $.BLOCK_FOLDED:case $.BLOCK_LITERAL:return o||i?K(a.value,t):J(a,t,n,r);case $.QUOTE_DOUBLE:return K(a.value,t);case $.QUOTE_SINGLE:return D(a.value,t);case $.PLAIN:return function(e,t,n,r){var o;const{type:i,value:a}=e,{actualString:u,implicitKey:l,indent:c,inFlow:s}=t;if(l&&/[\n[\]{},]/.test(a)||s&&/[[\]{},]/.test(a))return K(a,t);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a)){const o=-1!==a.indexOf('"'),i=-1!==a.indexOf("'");let u;return u=o&&!i?D:i&&!o?K:t.options.singleQuote?D:K,l||s||-1===a.indexOf("\n")?u(a,t):J(e,t,n,r)}if(!l&&!s&&i!==$.PLAIN&&-1!==a.indexOf("\n"))return J(e,t,n,r);if(""===c&&F(a))return t.forceBlockIndent=!0,J(e,t,n,r);const f=a.replace(/\n+/g,`$&\n${c}`);if(u)for(const e of t.doc.schema.tags)if(e.default&&"tag:yaml.org,2002:str"!==e.tag&&(null===(o=e.test)||void 0===o?void 0:o.test(f)))return K(a,t);return l?f:B(f,c,N,M(t))}(a,t,n,r);default:return null}};let c=l(u);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,r=o&&e||n;if(c=l(r),null===c)throw new Error(`Unsupported default string type ${r}`)}return c}(i,t,n,r):i.toString(t,n,r);return a?f(i)||"{"===l[0]||"["===l[0]?`${a} ${l}`:`${a}\n${t.indent}${l}`:l}function W(e,t,{key:n,value:r}){if(e&&e.doc.schema.merge&&q(n))if(y(r))for(const n of r.items)z(e,t,n);else if(Array.isArray(r))for(const n of r)z(e,t,n);else z(e,t,r);else{const o=j(n,"",e);if(t instanceof Map)t.set(o,j(r,o,e));else if(t instanceof Set)t.add(o);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(m(e)&&n&&n.doc){const t=(i=n.doc,a={},{anchors:new Set,doc:i,indent:"",indentStep:"number"==typeof a.indent?" ".repeat(a.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true",verifyAliasOrder:!0},a)});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const u=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(u);e.length>40&&(e=e.substring(0,36)+'..."'),o=`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`,"debug"!==(r=n.doc.options.logLevel)&&"warn"!==r||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(o):console.warn(o)),n.mapKeyWarned=!0}return u}var r,o,i,a;return JSON.stringify(t)}(n,o,e),a=j(r,i,e);i in t?Object.defineProperty(t,i,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[i]=a}}return t}const q=e=>"<<"===e||f(e)&&"<<"===e.value&&(!e.type||e.type===$.PLAIN);function z(e,t,n){const r=e&&u(n)?n.resolve(e.doc):null;if(!c(r))throw new Error("Merge sources must be map aliases");const o=r.toJSON(null,e,Map);for(const[e,n]of o)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}class V{constructor(e,t=null){Object.defineProperty(this,a,{value:r}),this.key=e,this.value=t}toJSON(e,t){return W(t,t&&t.mapAsMap?new Map:{},this)}toString(e,t,n){return e&&e.doc?function({key:e,value:t},n,r,o){const{allNullValues:i,doc:a,indent:u,indentStep:l,options:{indentSeq:c,simpleKeys:s}}=n;let h=m(e)&&e.comment||null;if(s){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(p(e))throw new Error("With simple keys, collection cannot be used as a key value")}let b=!s&&(!e||h&&null==t&&!n.inFlow||p(e)||(f(e)?e.type===$.BLOCK_FOLDED||e.type===$.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!b&&(s||!i),indent:u+l});let v=!1,d=!1,g=U(e,n,(()=>v=!0),(()=>d=!0));if(!b&&!n.inFlow&&g.length>1024){if(s)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");b=!0}if(n.inFlow){if(i||null==t)return v&&r&&r(),b?`? ${g}`:g}else if(i&&!s||null==t&&b)return v&&(h=null),d&&!h&&o&&o(),R(`? ${g}`,n.indent,h);v&&(h=null),g=b?`? ${R(g,n.indent,h)}\n${u}:`:R(`${g}:`,n.indent,h);let w="",O=null;m(t)?(t.spaceBefore&&(w="\n"),t.commentBefore&&(w+=`\n${t.commentBefore.replace(/^/gm,`${n.indent}#`)}`),O=t.comment):t&&"object"==typeof t&&(t=a.createNode(t)),n.implicitKey=!1,b||h||!f(t)||(n.indentAtStart=g.length+1),d=!1,c||!(l.length>=2)||n.inFlow||b||!y(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substr(2));let _=!1;const S=U(t,n,(()=>_=!0),(()=>d=!0));let E=" ";return w||h?E=`${w}\n${n.indent}`:!b&&p(t)?("["===S[0]||"{"===S[0])&&!S.includes("\n")||(E=`\n${n.indent}`):"\n"===S[0]&&(E=""),n.inFlow?(_&&r&&r(),g+E+S):(_&&(O=null),d&&!O&&o&&o(),R(g+E+S,n.indent,O))}(this,e,t,n):JSON.stringify(this)}}function Q({comment:e,flow:t,items:n},r,{blockItem:o,flowChars:i,itemIndent:a,onChompKeep:u,onComment:l}){const{indent:c,indentStep:f}=r,y=t||r.inFlow;y&&(a+=f),r=Object.assign({},r,{indent:a,inFlow:y,type:null});let p=!0,h=!1;const b=n.reduce(((e,t,o)=>{let i=null;if(m(t)){if(!h&&t.spaceBefore&&e.push({comment:!0,str:""}),t.commentBefore)for(const n of t.commentBefore.match(/^.*$/gm))e.push({comment:!0,str:`#${n}`});t.comment&&(i=t.comment,p=!1)}else if(s(t)){const n=m(t.key)?t.key:null;if(n){if(!h&&n.spaceBefore&&e.push({comment:!0,str:""}),n.commentBefore)for(const t of n.commentBefore.match(/^.*$/gm))e.push({comment:!0,str:`#${t}`});n.comment&&(p=!1)}if(y){const e=m(t.value)?t.value:null;e?(e.comment&&(i=e.comment),(e.comment||e.commentBefore)&&(p=!1)):null==t.value&&n&&n.comment&&(i=n.comment)}}h=!1;let u=U(t,r,(()=>i=null),(()=>h=!0));return y&&o<n.length-1&&(u+=","),u=R(u,a,i),h&&(i||y)&&(h=!1),e.push({comment:!1,str:u}),e}),[]);let v;if(0===b.length)v=i.start+i.end;else if(y){const{start:e,end:t}=i,n=b.map((e=>e.str));let r=2;for(const e of b){if(e.comment||e.str.includes("\n")){p=!1;break}r+=e.str.length+2}if(!p||r>A.maxFlowStringSingleLineLength){v=e;for(const e of n)v+=e?`\n${f}${c}${e}`:"\n";v+=`\n${c}${t}`}else v=`${e} ${n.join(" ")} ${t}`}else{const e=b.map(o);v=e.shift()||"";for(const t of e)v+=t?`\n${c}${t}`:"\n"}return e?(v+="\n"+e.replace(/^/gm,`${c}#`),l&&l()):h&&u&&u(),v}function Y(e,t){const n=f(t)?t.value:t;for(const r of e)if(s(r)){if(r.key===t||r.key===n)return r;if(f(r.key)&&r.key.value===n)return r}}class G extends A{constructor(e){super(n,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;n=s(e)?e:new V(e&&"object"==typeof e&&"key"in e?e.key:e,e.value);const r=Y(this.items,n.key),o=this.schema&&this.schema.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);f(r.value)&&x(n.value)?r.value.value=n.value:r.value=n.value}else if(o){const e=this.items.findIndex((e=>o(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=Y(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=Y(this.items,e),r=n&&n.value;return!t&&f(r)?r.value:r}has(e){return!!Y(this.items,e)}set(e,t){this.add(new V(e,t),!0)}toJSON(e,t,n){const r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);for(const e of this.items)W(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!s(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Q(this,e,{blockItem:e=>e.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const Z={collection:"map",createNode:function(e,t,n){const{keepUndefined:r,replacer:o}=n,i=new G(e),a=(e,a)=>{if("function"==typeof o)a=o.call(t,e,a);else if(Array.isArray(o)&&!o.includes(e))return;(void 0!==a||r)&&i.items.push(function(e,t,n){const r=P(e,void 0,n),o=P(t,void 0,n);return new V(r,o)}(e,a,n))};if(t instanceof Map)for(const[e,n]of t)a(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i},default:!0,nodeClass:G,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(c(e)||t("Expected a mapping for this tag"),e)};class H extends A{constructor(e){super(i,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=X(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const n=X(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&f(r)?r.value:r}has(e){const t=X(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=X(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];f(r)&&x(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t&&t.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(j(e,String(r++),t));return n}toString(e,t,n){return e?Q(this,e,{blockItem:e=>e.comment?e.str:`- ${e.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}}function X(e){let t=f(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}function ee(e){return"bigint"==typeof e||Number.isInteger(e)}const te=({value:e})=>JSON.stringify(e);[Z,{collection:"seq",createNode:function(e,t,n){const{replacer:r}=n,o=new H(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if("function"==typeof r){const n=t instanceof Set?i:String(e++);i=r.call(t,n,i)}o.items.push(P(i,void 0,n))}}return o},default:!0,nodeClass:H,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(y(e)||t("Expected a sequence for this tag"),e)}].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:te},{identify:e=>null==e,createNode:()=>new $(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:te},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:te},{identify:ee,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>ee(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:te}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)});class ne extends H{constructor(){super(),this.add=G.prototype.add.bind(this),this.delete=G.prototype.delete.bind(this),this.get=G.prototype.get.bind(this),this.has=G.prototype.has.bind(this),this.set=G.prototype.set.bind(this),this.tag=ne.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t&&t.onCreate&&t.onCreate(n);for(const e of this.items){let r,o;if(s(e)?(r=j(e.key,"",t),o=j(e.value,r,t)):r=j(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}}ne.tag="tag:yaml.org,2002:omap";class re extends G{constructor(e){super(e),this.tag=re.tag}add(e){let t;t=s(e)?e:"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new V(e.key,null):new V(e,null),Y(this.items,t.key)||this.items.push(t)}get(e,t){const n=Y(this.items,e);return!t&&s(n)?f(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=Y(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new V(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}re.tag="tag:yaml.org,2002:set";const oe={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(oe.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,o,i,a,u]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,o,i||0,a||0,u||0,l);const s=t[8];if(s&&"Z"!==s){let e=function(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,o=e=>t?BigInt(e):Number(e),i=r.replace(/_/g,"").split(":").reduce(((e,t)=>e*o(60)+o(t)),o(0));return"-"===n?o(-1)*i:i}(s,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};Error;const ie=Symbol("break visit"),ae=Symbol("skip children"),ue=Symbol("remove item");function le(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),ce(Object.freeze([]),e,t)}function ce(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const o of["key","value"]){const i=t[o];if(i&&"items"in i){for(let t=0;t<i.items.length;++t){const r=ce(Object.freeze(e.concat([[o,t]])),i.items[t],n);if("number"==typeof r)t=r-1;else{if(r===ie)return ie;r===ue&&(i.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===o&&(r=r(t,e))}}return"function"==typeof r?r(t,e):r}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}le.BREAK=ie,le.SKIP=ae,le.REMOVE=ue,le.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n&&n[e];if(!t||!("items"in t))return;n=t.items[r]}return n},le.parentCollection=(e,t)=>{const n=le.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],o=n&&n[r];if(o&&"items"in o)return o;throw new Error("Parent collection not found")};var fe=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.type=n,this.current=r,this.start=r.range[0],this.end=r.range[1],this.childs=[]}var t,n;return t=e,(n=[{key:"getChild",value:function(e){return this.childs[e]}},{key:"getChildCount",value:function(){return this.childs.length}},{key:"getValue",value:function(){return this.value}},{key:"toString",value:function(){return this.value}}])&&se(t.prototype,n),e}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(r);if(o){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return he(this,e)});function a(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t,n)}return t=a,(n=[{key:"equals",value:function(e){if(e instanceof a)return this.value==e.value;this.ctx.syntaxError(this.current,"Error can not compare values '".concat(this.value,"' and '").concat(e.value,"'"))}}])&&pe(t.prototype,n),a}(fe);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_e(r);if(o){var n=_e(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oe(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,"string",t),!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a string"));return n.value=t.value,n}return t=a,n=[{key:"checkCurrent",value:function(e){return f(e)&&"string"==typeof e.value}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],null&&ge(t.prototype,null),n&&ge(t,n),a}(ve);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$e(r);if(o){var n=$e(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xe(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,"binary",t),!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a base64 string"));return n.value=t.value,n}return t=a,n=[{key:"checkCurrent",value:function(e){return f(e)&&"string"==typeof e.value&&/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e.value)}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],null&&ke(t.prototype,null),n&&ke(t,n),a}(ve);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var n=Te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ne(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,"int",t),!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not an integer"));return n.value=t.value,n}return t=a,n=[{key:"checkCurrent",value:function(e){return f(e)&&"number"==typeof e.value&&e.value==Math.floor(e.value)}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],null&&Ae(t.prototype,null),n&&Ae(t,n),a}(ve);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(r);if(o){var n=Ke(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fe(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,"float",t),!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a number"));return n.value=t.value,n}return t=a,n=[{key:"checkCurrent",value:function(e){return f(e)&&"number"==typeof e.value}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],null&&Le(t.prototype,null),n&&Le(t,n),a}(ve);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ze(r);if(o){var n=ze(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return qe(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,"boolean",t)).value=null,!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t.value,"' is not a boolean"));return n.value=t.value,n}return t=a,n=[{key:"checkCurrent",value:function(e){return f(e)&&"boolean"==typeof e.value}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],null&&Ue(t.prototype,null),n&&Ue(t,n),a}(ve);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(r);if(o){var n=He(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ze(this,e)});function a(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,"null",t)).value=null,!a.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not the null value"));return n}return t=a,n=[{key:"checkCurrent",value:function(e){return f(e)&&(null==e.value||["Null","NULL","null","~"].includes(e.value))}},{key:"parse",value:function(e,t){try{return new a(e,t)}catch(e){return null}}}],null&&Ye(t.prototype,null),n&&Ye(t,n),a}(ve);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(u,e);var t,n,r,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(o);if(i){var n=ot(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rt(this,e)});function u(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=a.call(this,e,"timestamp",t),!u.checkCurrent(t))throw e.syntaxError(t,"Error: value '".concat(t?t.value:"","' is not a timestamp in ISO9601 format"));return r.value=new Date(t.value),r}return t=u,r=[{key:"checkCurrent",value:function(e){var t=f(e)&&"string"==typeof e.value&&/\d{4}-\d{2}-\d{2}|\d{4}-\d{2}?-\d{2}?([Tt]|[ \t]+)\d{2}?:\d{2}:\d{2}(\.\d*)?(([ \t]*)Z|[-+]\d\d?(:\d{2})?)?/.test(e.value);if(1==t)try{new Date(e.value)}catch(e){t=!1}return t}},{key:"parse",value:function(e,t){try{return new u(e,t)}catch(e){return null}}}],(n=[{key:"equals",value:function(e){return e instanceof u?this.value.getTime()==e.value.getTime():this.ctx.syntaxError("Error : can not compare a timestamp with something else")}}])&&tt(t.prototype,n),r&&tt(t,r),u}(ve);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=st(r);if(o){var n=st(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ct(this,e)});function a(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t,n)}return t=a,(n=[{key:"length",value:function(){return this.childs.length}},{key:"isEmpty",value:function(){return 0==this.length()}}])&&ut(t.prototype,n),a}(fe);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bt(r);if(o){var n=bt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ht(this,e)});function a(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,e,"map",t),"object"!=yt(n)||n instanceof Array)throw e.syntaxError(t,"Erorr : MapNode must be initialized with a parsed map. This should not happen.");for(var o in r.value=n,n)r.childs.push(n[o]);return r}return t=a,n=[{key:"checkCurrent",value:function(e){return c(e)&&e.items.every((function(e){return e.key&&f(e.key)&&"string"==typeof e.key.value}))}}],null&&pt(t.prototype,null),n&&pt(t,n),a}(ft);function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){"object"!=gt(t)&&e.grammarError("Error: oneof rule can not be parsed'");var r=t._oneOf;if(r instanceof Array){var o,i=[].concat(e.errors),a=[].concat(e.warnings),u=e.errors.length,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(r);try{for(l.s();!(o=l.n()).done;){var c=cn(e,null,o.value,n);if(u==e.errors.length)return e.errors=i,e.warnings=a,c;u=e.errors.length}}catch(e){l.e(e)}finally{l.f()}return e.syntaxError(n,"Syntax Error : no valid alternative found during parsing"),null}e.grammarError("Error: _oneof rules expects a sequence of alternatives")}}],null&&wt(t.prototype,null),n&&wt(t,n),e}();function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var St="undefined"!=typeof Symbol;function Et(e){var t=_t(e);return"string"===t||"number"===t||"boolean"===t||!0===St&&"symbol"===t||null==e||!0===St&&e instanceof Symbol||e instanceof String||e instanceof Number||e instanceof Boolean}var kt=["_merge"];function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(t,n){if("object"==Pt(n)){if(n._oneOf){var r;!n._oneOf instanceof Array&&t.grammarError("Error : _oneof value have to be a list"),n._oneOf=n._oneOf.map((function(n){return e.parse(t,n)}));do{if((r=n._oneOf.findIndex((function(e){return e._oneOf})))>=0){var o=n._oneOf[r]._oneOf;(n={_oneOf:[].concat(n._oneOf)})._oneOf.splice(r,1),n._oneOf=n._oneOf.concat(o)}}while(r>=0);return n}if(n._merge){var i=function(){if(!(n._merge instanceof Array))return t.grammarError("Error : _merge value have to be a map"),{v:null};var r,o=n,i=(o._merge,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,kt));n={_merge:n._merge},Object.keys(i).length&&n._merge.push(i),n._merge=n._merge.map((function(e){return Et(e)&&t.rules[e]?t.rules[e]:e})),n._merge=n._merge.map((function(n){return e.parse(t,n)}));do{if((r=n._merge.findIndex((function(e){return e._merge})))>=0){var a=n.one._merge;(n={_merge:[].concat(n._merge)})._merge.splice(r,1),n._merge=n._merge.concat(a)}}while(r>=0);var u={_oneOf:[]};do{if((r=(n={_merge:[].concat(n._merge)})._merge.findIndex((function(e){return e._oneOf})))>=0){var l=n._merge[r]._oneOf;(n={_merge:[].concat(n._merge)})._merge.splice(r,1),l.forEach((function(e){var t={_merge:[e].concat(n._merge)};u._oneOf.push(t)}))}}while(r>=0);if(u._oneOf.length>=1)return{v:e.parse(t,u)};n._merge.some((function(e){return e._merge||e._oneOf}))&&t.grammarError("Error : merge has not been processed successfully. This error should not occur.");var c={},s={},f=null,y=-1,p=-1;n._merge.forEach((function(e){if(e._map)for(var n in c=xt({},c),e._map)c.key&&t.grammarError("Error : can not merge two maps with some identical keys"),c[n]=e._map[n];if(e._mapFacultative)for(var r in s=xt({},s),e._mapFacultative)s.key&&t.grammarError("Error : can not merge two maps with some identical keys"),s[r]=e._mapFacultative[r];if(e._mapOf){if(null!=f)return t.grammarError("Error : only one '_mapOf' is allowed in a '_merge' clause"),null;f=e._mapOf}e._nb&&(y<0||y==e._nb?y=e._nb:t.grammarError("Contradictory sizing in merge clause")),e._min&&(p=Math.max(e._min,p)),e._max&&(nax=y>0?Math.min(e._max,-1):e._max)}));var m={};return y>=0&&(m._nb=y),p>=0&&(m._min=p),Object.keys(c).length>0&&(m._map=c),Object.keys(s).length>0&&(m._mapFacultative=s),null!=f&&(m._mapOf=f),{v:m}}();if("object"===Pt(i))return i.v}if(n._map){var a={};for(var u in n._map)a[u]=e.parse(t,n._map[u]);n._map=a}if(n._mapFacultative){var l={};for(var c in n._mapFacultative)l[c]=e.parse(t,n._mapFacultative[c]);n._mapFacultative=l}if(n._mapOf){var s={};for(var f in n._mapOf){var y=e.parse(t,f),p=e.parse(t,n._mapOf[f]);s[y]=p}n._mapOf=s}n._list&&(n._list=n._list.map((function(n){return e.parse(t,n)}))),n._listFacultative&&(n._listFacultative=n._listFacultative.map((function(n){return e.parse(t,n)}))),n._listOf&&(n._listOf=e.parse(t,n._listOf))}return n}}],null&&Ct(t.prototype,null),n&&Ct(t,n),e}();function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"isPositiveInt",value:function(e){return"number"==typeof e&&e==Math.floor(e)&&e>0}},{key:"sizeChecker",value:function(t,n,r,o){if(e.isPositiveInt(r))if(c(o)||y(o))switch(n){case"eq":return o.items.length==r;case"min":return o.items.length>=r;case"max":return o.items.length<=r}else t.syntaxError(o,"Error : a map is expected");else t.grammarError("Error: the map checker '".concat(n,"' does not have a positive integer as value"));return!1}},{key:"sizeCheckers",value:function(t,n,r){return null==n._nb||e.sizeChecker(t,"eq",n._nb,r)?null==n._min||e.sizeChecker(t,"min",n._min,r)?!(null!=n._max&&!e.sizeChecker(t,"max",n._max,r)&&(t.syntaxError(r,"Error : map expected with more than ".concat(n._max," elements but ").concat(r.items.length," are provided")),1)):(t.syntaxError(r,"Error : map expected with more than ".concat(n._min," elements but ").concat(r.items.length," are provided")),!1):(t.syntaxError(r,"Error : map expected with ".concat(n._nb," elements but ").concat(r.items.length," are provided")),!1)}}],null&&Rt(t.prototype,null),n&&Rt(t,n),e}();function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||It(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){if(!vt.checkCurrent(n))return e.syntaxError(n,"Error : a map whose keys are strings is expected "),null;if(t._merge&&(t=At.parse(e,t))._oneOf)return Ot.parse(e,t,n);var r=t._map,o=t._mapOf,i=t._mapFacultative;if(null!=r&&"object"==!Lt(r)||null!=o&&"object"!=Lt(o)||null!=i&&"object"!=Lt(i))return e.grammarError("Error : error in map value definition"),null;if(!Nt.sizeCheckers(e,t,n))return null;if(null!=r)for(var a in r){if("string"!=typeof a)return e.grammarError("Error : error in map definition"),null;if(!n.has(a))return e.syntaxError(n,"Error : key '".concat(a,"' not found in current value")),null}var u,l=null;if(o){var c=Object.entries(o);if(1==c.length){var s=Tt(c,1),f=Tt(s[0],2);u=f[0],l=f[1]}}var y,p={},m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=It(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(n.items);try{for(m.s();!(y=m.n()).done;){var h=y.value,b=h.key.value,v=h.value,d=null;if(r&&r[b])d=cn(e,null,r[b],v);else if(i&&i[b])d=cn(e,null,i[b],v);else{if(!u||!l)return e.syntaxError(v,"Error : '".concat(b,"' is not a valid key (in rule : ").concat(JSON.stringify(t),")")),null;var g=cn(e,null,u,h.key);if(d=cn(e,null,l,v),g.value!=b)return e.syntaxError(b,"Error : '".concat(b,"' does not match expected '").concat(u,"' type")),null}if(null==d)return e.syntaxError(v,"Error : bad value '".concat(v,"'found for '").concat(b,"' (mapparser.parse)")),null;var w=new Se(e,h.key);if(d.key=w,null!=p[b])return e.syntaxError(v,"Error : more than one value provided in the map for the key '".concat(b,"'")),null;p[b]=d}}catch(e){m.e(e)}finally{m.f()}return new vt(e,n,p)}},{key:"parse_any",value:function(e,t){if(!vt.checkCurrent(t))return e.syntaxError(t,"Error : a map whose keys are strings is expected "),null;var n={};return t.items.forEach((function(t){var r=t.key.value,o=t.value,i=Gt.parse_any(e,o);if(null==i)return e.syntaxError(o,"Error : bad value '".concat(o,"' found for '").concat(r,"' (mapparser.parse_any)")),null;var a=new Se(e,t.key);i.key=a,null!=n[r]&&e.syntaxError(o,"Error : more than one value provided in the map for the key '".concat(r,"'")),n[r]=i})),new vt(e,t,n)}}],null&&Mt(t.prototype,null),n&&Mt(t,n),e}();function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wt(r);if(o){var n=Wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ut(this,e)});function a(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,e,"list",t),!n instanceof Array)throw e.syntaxError(t,"Erorr : ListNode must be initialized with an array. This should not happen.");return r.value=n,r.childs=r.value,r}return t=a,n=[{key:"checkCurrent",value:function(e){return y(e)}}],null&&Dt(t.prototype,null),n&&Dt(t,n),a}(ft);function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){if(!qt.checkCurrent(n))return e.syntaxError(n,"Error : a list is expected "),null;if(!Nt.sizeCheckers(e,t,n))return null;var r=t._list,o=t._listOf,i=t._listFacultative;if(null!=r&&!(r instanceof Array)||null!=i&&!(i instanceof Array))return e.grammarError("Error : error in list value definition"),null;var a=0,u=n.items.length,l=[];r&&r.forEach((function(t){if(!(a<u))return e.syntaxError(n,"Error : mandatory elements missing in the list"),null;var r=cn(e,null,t,n.items[a]);if(null==r)return e.syntaxError(n,"Error : can node parse an element of the list"),null;l.push(r),a+=1}));var c=[].concat(e.errors),s=[].concat(e.warnings);if(i&&i.forEach((function(t){if(a<u){var r=cn(e,null,t,n.items[a]);null!=r&&(l.push(r),a+=1)}})),null!=o)for(;a<u;a++){var f=cn(e,null,o,n.items[a]);if(null==f)return e.syntaxError(n,"Error : wrong type for an element in a list"),null;l.push(f)}return a<u?(e.syntaxError(n,"Error : too much elements in the list"),null):(e.errors=c,e.warnings=s,new qt(e,n,l))}},{key:"parse_any",value:function(e,t){if(!qt.checkCurrent(t))return e.syntaxError(t,"Error : a list whose keys are strings is expected "),null;var n=[];return t.items.forEach((function(t){var r=Gt.parse_any(e,t);if(null==r)return e.SyntaxError(value,"Error : bad value '".concat(value,"' found for '").concat(key,"' (listparser.parse_any)")),null;n.push(r)})),new qt(e,t,n)}}],null&&zt(t.prototype,null),n&&zt(t,n),e}();function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(t,n,r){switch(n){case"string":return Se.parse(t,r);case"binary":return Pe.parse(t,r);case"timestamp":return it.parse(t,r);case"int":return Ie.parse(t,r);case"float":return De.parse(t,r);case"boolean":return Ve.parse(t,r);case"null":return Xe.parse(t,r);case"any":return e.parse_any(t,r);default:return function(e,t,n){var r=e.rules[t];return void 0!==r?cn(e,t,r,n):(e.grammarError("no rule named ".concat(t," found.")),null)}(t,n,r)}}},{key:"parse_any",value:function(e,t){if(f(t)){switch(Qt(t.value)){case"number":return Ie.checkCurrent(t)?Ie.parse(e,t):De.parse(e,t);case"boolean":return Ve.parse(e,t);case"string":return Se.parse(e,t);case"object":if(null==t.value)return Xe.parse(e,t);e.syntaxError(t,"Error: value '".concat(t.value,"' is not a scalar value"));default:e.syntaxError(t,"Error: value '".concat(t.value,"' is not a scalar value"))}return null}return c(t)?Ft.parse_any(e,t):y(t)?Vt.parse_any(e,t):null}}],null&&Yt(t.prototype,null),n&&Yt(t,n),e}();function Zt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){"object"==Xt(t)&&t._in||e.grammarError("Error:  can not parse _in rule'");var r=t._in;if(!(r instanceof Array))return e.grammarError("Error: _in rules expects a sequence of alternatives"),null;var o,i=Zt(r);try{for(i.s();!(o=i.n()).done;)if(!Et(o.value))return e.grammarError("Error: _in rules expects each alternative to be a scalar"),null}catch(e){i.e(e)}finally{i.f()}if(!f(n))return e.syntaxError(n,"Syntax Error : scalar value expected by rule '_in'"),null;var a=Gt.parse_any(e,n);if(a){var u,l=[].concat(e.errors),c=[].concat(e.warnings),s=(e.errors.length,a.value),y=Zt(r);try{for(y.s();!(u=y.n()).done;){var p=u.value;if(p){var m=p==s?a:null;if(null!=m)return e.errors=l,e.warnings=c,m;e.errors.length}}}catch(e){y.e(e)}finally{y.f()}}return e.syntaxError(n,"Syntax Error : no valid alternative for '_in' rule found during parsing"),null}}],null&&en(t.prototype,null),n&&en(t,n),e}();function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(e,t,n){if(!Se.checkCurrent(n))return e.syntaxError(n,"Error: regular expressions match only strings, '".concat(n?n.value:"","' is not a string")),null;var r=t._regex;if(null==r)return e.grammarError("Error : regep rule must have a value for key '_regex'"),null;var o=null;try{o=new RegExp(r)}catch(e){}return null==o?(e.grammarError("Error: value '".concat(o,"' is not a valid regular expression")),null):o.test(n.value)?new Se(e,n):(e.syntaxError(n,"Error: value '".concat(n.value,"' does not match the regular expression '").concat(o,"'")),null)}}],null&&nn(t.prototype,null),n&&nn(t,n),e}();function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parse",value:function(t,n,r,o){if(e.scalartypes.includes(n)||e.keywords.includes(n))return t.syntaxError(o,"'".concat(n,"' is not allowed as rule_name in Lidy Grammar (reserved keyword)")),null;var i="enter_"+n;o.ctx=t,t.listener&&t.listener[i]&&t.listener[i](o);var a=cn(t,null,r,o),u="exit_"+n;return"node_template"==n&&console.log("Sortie de node_template"),a&&t.listener&&t.listener[u]&&t.listener[u](a),a}}],null&&on(t.prototype,null),n&&on(t,n),e}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t,n,r){if(t)return un.parse(e,t,n,r);if(Et(n))return Gt.parse(e,n,r);if("object"==ln(n)){if(n._map||n._mapOf||n._mapFacultative||n._merge)return Ft.parse(e,n,r);if(n._list||n._listOf||n._listFacultative)return Vt.parse(e,n,r);if(n._oneOf)return Ot.parse(e,n,r);if(n._regex)return rn.parse(e,n,r);if(n._in)return tn.parse(e,n,r)}return e.grammarError("Error : grammar error : no valid keyword found"),null}an(un,"scalartypes",["string","int","float","null","boolean","binary","timestamp"]),an(un,"keywords",["_map","_mapOf","_mapFacultative","_list","_listOf","_listFacultative","_oneOf","_regex","_nb","_min","_max","_in"])})();